function setChildIndexIds(element,taskId,suffix,depth){var children=$(element).children(),id=$(element).attr("id");if(id=id?id+"{{$index}}tsk"+taskId+"suf"+suffix+"dep"+depth:"grid{{$index}}tsk"+taskId+"suf"+suffix+"dep"+depth,++depth,$(element).attr("id",id),children.length>0)for(var i=0;i<children.length;i++){var element=children[i];setChildIndexIds(element,taskId,suffix+"_"+i,depth)}}function Task(){var task={};return task.id=void 0,task.glyph=void 0,task.title=void 0,task.active=void 0,task.size=void 0,task.pinned=void 0,task.locked=void 0,this.url=void 0,task}function Control(){var control={};return control.id=void 0,control.glyph=void 0,control.label=void 0,control.disabled=void 0,control}function estimateHeight(height){var _pc=window.innerWidth<450?55:window.innerWidth<768?55:window.innerWidth<1200?73:50;return height-_pc}function estimatedFrameHeight(height){var _pc=window.innerWidth<450?60:window.innerWidth<768?60:window.innerWidth<1200?80:50;return height-_pc}function generateTask(scope,t,f2){if(console.info("generateTask > scope.task.page",scope.task.page),scope.task.pageLoaded=!1,void 0===scope.task.page||null===scope.task.page){if(scope.task.pages){var $page=getHomePageFromTaskPages(scope.task);scope.task.page=$page.page,scope.homeUrl=$page.page.get,scope.home=$page.page.name,scope.task.navPages=[$page.page],console.info("page",scope.task.page)}}else{scope.homeUrl=scope.task.page.get,scope.task.page.param=scope.task.pageParam;var page=scope.task.page;if(scope.task.page.isHome&&scope.task.page.isHome!==!1)scope.task.navPages=[page];else if(scope.task.pages){var $page=getHomePageFromTaskPages(scope.task);scope.home=$page.page.name,scope.task.navPages=[$page.page]}scope.task.page.param&&"null"!==scope.task.page.param&&(scope.homeUrl=scope.task.page.get+scope.task.page.param,console.info("homeUrl",scope.homeUrl)),scope.task.navPages.indexOf(page)>-1?scope.currentPageIndex=getPageIndexFromPages(scope.task.page.name,scope.task.navPages).index:(scope.task.navPages.push(page),scope.currentPageIndex=scope.task.navPages.length-1);for(var i=0;i<scope.toolbars.length;i++)"back"===scope.toolbars[i].id&&(scope.toolbars[i].disabled=!(scope.currentPageIndex>0)),"forward"===scope.toolbars[i].id&&(scope.toolbars[i].disabled=!(scope.currentPageIndex<scope.task.navPages.length-1))}scope.userTask.fluidId=scope.task.fluidId,console.info("new_task",scope.task);var loadGetFn=function(){(void 0===scope.task.preLoaded||scope.task.preLoaded===!1)&&(scope.task.preLoad(),scope.task.preLoaded=!0),scope.loadGet(),scope.task.preLoaded&&(scope.task.load(),scope.task.loaded=!0),scope.task.postLoad()};t(loadGetFn,500)}function isJson(str){try{JSON.parse(str)}catch(e){return!1}return!0}function getHomePageFromTaskPages(task){var $page={};return angular.forEach(task.pages,function(page,key){page.isHome&&(this.page=page,this.index=key)},$page),$page}function getPageIndexFromTaskPages(name,task){var $index=-1;return angular.forEach(task.pages,function(page,key){page.name===name&&(this.index=key)},$index),$index}function getPageIndexFromPages(name,pages){var $index=-1;return angular.forEach(pages,function(page,key){null!=page&&page.name===name&&(this.index=key)},$index),$index}function saveTaskSate(task,userTask,fluidHttpService,field){return task.generic===!1&&-1===task.id.indexOf("gen")?(userTask.fluidTaskId=task.id.split("_")[0],userTask.fluidId=task.fluidId,fluidHttpService.query({url:task.stateAjax.url+"?field="+field,method:task.stateAjax.method,data:userTask},task)):void 0}function autoSizePanel(task){var height=window.innerHeight;height=estimateHeight(height)-30;var panel=$("#_id_fp_"+task.id+".panel"),panelBody=$("#_id_fp_"+task.id+".panel div.fluid-panel-content");console.info("fluid-panel-fullscreen-height",height),panel.height(height);var headerHeight=114;console.info("fluid-panel-fullscreen-header-height",headerHeight);var bodyHeight=height-headerHeight;console.info("fluid-panel-fullscreen-body-height",bodyHeight),panelBody.css("height",bodyHeight,"important"),panelBody.css("overflow","auto")}var fluidComponents=angular.module("fluid",["angularFileUpload","oc.lazyLoad","LocalStorageModule","templates-dist","ngSanitize"]);fluidComponents.config(["$httpProvider","localStorageServiceProvider",function(h,ls){ls.setPrefix("fluid").setStorageType("sessionStorage").setNotify(!0,!0),h.interceptors.push("fluidInjector")}]),fluidComponents.run([function(){}]),fluidComponents.directive("fluidPanel",["fluidFrameService","fluidHttpService","$templateCache","$compile","fluidMessageService","$rootScope","$q","$timeout","$ocLazyLoad","sessionService","fluidOptionService",function(f,f2,tc,c,ms,rs,q,t,oc,ss,fos){return{scope:{task:"="},restrict:"E",template:tc.get("templates/fluid/fluidPanel.html"),replace:!0,link:{pre:function(scope,element){scope.pathRegexPattern=/{[\w|\d]*}/,scope.generateUrl=function(url,param){isJson(param)&&(param=JSON.parse(param));for(var key in param)if(param.hasOwnProperty(key)){var reg=new RegExp("{"+key+"}","g");url=url.replace(reg,param[key])}return url},scope.fluidFrameService=f,console.info("fullScreen",scope.fluidFrameService.fullScreen),console.info("fluidPanel-task",scope.task),scope.userTask={},scope.userTask.closed=!1,scope.fluid={},scope.toolbars=[{id:"showPageList",glyph:"fa fa-bars",label:"Menu",disabled:!1,uiType:"success",action:function($event){if(f.fullScreen||"sm"!==rs.viewport&&"xs"!==rs.viewport&&("lg"!==rs.viewport||50!==scope.task.size&&25!==scope.task.size))scope.task.showPageList=!scope.task.showPageList;else{{$event.target}fos.open=!fos.open,scope.fluid.fluidOptionTemplate="pageList",scope.task.showPageList=!1}}},{id:"home",glyph:"fa fa-home",label:"home",disabled:!1,uiType:"info",action:function(){scope.fluid.goToHome()}},{id:"back",glyph:"fa fa-arrow-left",label:"back",disabled:!0,uiType:"info",action:function(){if(scope.task.navPages.length>0&&scope.task.navPages.length>scope.currentPageIndex){var i=--scope.currentPageIndex,count=scope.task.navPages.length-(i+1),page=scope.task.navPages[i];scope.task.navPages.splice(i+1,count),scope.fluid.navTo(page.name)}else this.disabled=!0}},{id:"forward",glyph:"fa fa-arrow-right",label:"forward",disabled:!0,uiType:"info",action:function(){if(scope.task.navPages.length-1>scope.currentPageIndex){var page=scope.task.navPages[++scope.currentPageIndex];scope.fluid.navTo(page.name)}else this.disabled=!0}}],scope.fluid.event={},scope.fluid.message={},scope.fluid.message.duration=3e3,scope.http={},scope.currentPageIndex=0,scope.fluid.onPageChanging=function(page,param){return!0},scope.fluid.onRefreshed=function(){},scope.fluid.onOpenPinned=function(page,param){},scope.fluid.navToTask=function(task){var $index={index:0};angular.forEach(f.taskList,function(tsk,index){tsk.id===task.id&&(this.index=index)},$index),t(function(){$(".frame-content").scrollTo($("div.panel[task]:eq("+$index.index+") div"),200)})},scope.fluid.openTaskBaseUrl="services/fluid_task_service/getTask?",scope.fluid.openTask=function(name,page,param,newTask,origin,size){var url=scope.fluid.openTaskBaseUrl;url+=size?"size="+size+"&":"size=100&",url+="active=true&name="+name,page&&(url+="&page="+page),param&&(url+="&page-path="+param),newTask&&(url+="&newTask="+newTask),console.info("openTask",url),f.addTask(url,origin?origin:scope.task,!0)};element.parent();scope.fluid.getHomeUrl=function(){return f2.host+scope.homeUrl},scope.fluid.getElementFlowId=function(id){return id+"_"+scope.task.id},scope.fluid.getEventId=function(id){return id+"_fp_"+scope.task.id},scope.fluid.event.getResizeEventId=function(){return scope.fluid.getEventId("rsz_evt_id_")},scope.fluid.event.getPageCallBackEventId=function(){return"task_fluid_page_call_back_event_id_"+scope.task.id},scope.fluid.event.getOnTaskLoadedEventId=function(){return scope.fluid.getEventId("on_ld_tsk_evt_id_")},scope.fluid.event.getGoToEventId=function(){return goToEventID+scope.task.id},scope.fluid.event.getRefreshId=function(){return scope.fluid.getEventId("tsk_rfh_id_")},scope.fluid.event.getSuccessEventId=function(){return scope.fluid.getEventId("suc_evt_id_")},scope.fluid.event.getErrorEventId=function(){return scope.fluid.getEventId("err_evt_id_")};var messageId=scope.fluid.getElementFlowId("pnl_msg");scope.fluid.message.info=function(msg){ms.info(messageId,msg,scope.fluid.message.duration).open()},scope.fluid.message.warning=function(msg){ms.warning(messageId,msg,scope.fluid.message.duration).open()},scope.fluid.message.danger=function(msg){ms.danger(messageId,msg,scope.fluid.message.duration).open()},scope.fluid.message.success=function(msg){ms.success(messageId,msg,scope.fluid.message.duration).open()},scope.fluid.controls=void 0,scope.http.get=function(url,param){return param&&(url.search(scope.pathRegexPattern)>0?url=scope.generateUrl(url,param):url+=param),f2.get(url,scope.task)},scope.http["delete"]=function(url,param){return param&&(url.search(scope.pathRegexPattern)>0?url=scope.generateUrl(url,param):url+=param),f2["delete"](url,scope.task)},scope.http.post=function(url,data,param){return param&&(url.search(scope.pathRegexPattern)>0?url=scope.generateUrl(url,param):url+=param),f2.post(url,data,scope.task)},scope.http.put=function(url,data,param){return param&&(url.search(scope.pathRegexPattern)>0?url=scope.generateUrl(url,param):url+=param),f2.put(url,data,scope.task)},scope.loadGet=function(){return rs.$$phase||scope.$apply(),scope.fluid.controls&&angular.forEach(scope.fluid.controls,function(control){control.pages&&scope.fluid.addControl(control,control.pages)}),scope.task.prevPage&&scope.task.prevPage.destroy&&scope.task.prevPage.destroy(),console.info("autoget-page",scope.task.page),q(function(resolve,reject){if(void 0!==scope.task.page&&null!==scope.task.page&&scope.task.page.autoGet&&scope.task.page.autoGet===!0){scope.task.currentPage=scope.task.page.name;var url=scope.homeUrl;scope.task.page.getParam&&(url=scope.homeUrl.search(scope.pathRegexPattern)>0?scope.generateUrl(scope.homeUrl,scope.task.page.getParam):scope.homeUrl+scope.task.page.getParam),console.info("auto-get-url",url),f2.get(url,scope.task).success(function(data){console.info("autoget",data),resolve({page:scope.task.page.name,value:data})})}else void 0===scope.task.page||null===scope.task.page||scope.task.page.autoGet&&null!==scope.task.page.autoGet&&scope.task.page.autoGet!==!1||(scope.task.currentPage=scope.task.page.name,console.info("autoget false",!1),resolve({page:scope.task.page.name}))}).then(function(data){scope.task.pageLoaded=!0;var pagePanel=element.find(".fluid-panel-page");console.info("page-panel",pagePanel),console.info("page-panel-task",scope.task),pagePanel.ready(function(){t(function(){scope.task.pinned?(scope.task.loaded=!0,scope.fluid.onOpenPinned(scope.task.page,scope.task.pageParam)):!scope.task.page.load&&scope.fluid.pageCallBack?(scope.fluid.pageCallBack(data.page,data.value),rs.$$phase||scope.$apply(),scope.task.loaded=!0):(scope.task.page.load&&scope.task.page.load(data.value),rs.$$phase||scope.$apply(),scope.task.loaded=!0)},400)})})},scope.fluid.addControl=function(control,pageName){var exists=!1;if(angular.forEach(scope.toolbars,function(ctl){control.id===ctl.id&&(exists=!0)}),Array.isArray(pageName)){var index=pageName.indexOf(scope.task.page.name);if(index>-1)exists||scope.toolbars.push(control);else if(exists)for(var t=scope.toolbars.length-1;t>0;t--){var toolbar=scope.toolbars[t];toolbar.id===control.id&&scope.toolbars.splice(t,1)}}else if(scope.task.page.name===pageName)exists||scope.toolbars.push(control);else if(exists)for(var t=scope.toolbars.length-1;t>0;t--){var toolbar=scope.toolbars[t];if(toolbar.id===control.id){scope.toolbars.splice(t,1);break}}},scope.navToPage=function(name){return q(function(resolve){angular.forEach(scope.task.navPages,function(page){if(name===page.name){scope.task.prevPage=scope.task.page,scope.task.page=page;var uri=page.get;void 0!==scope.task.page.param&&null!=scope.task.page.param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,scope.task.page.param):uri+=scope.task.page.param),scope.homeUrl=uri,scope.task.pinned===!0&&(scope.userTask.page=scope.task.page.name,scope.userTask.param=scope.task.page.param,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.fluidTaskId=scope.task.id.split("_")[0],scope.userTask.fluidId=scope.task.fluidId,scope.userTask.pinned=scope.task.pinned,f2.post("services/fluid_user_task_crud/save_task_state?field=pin",scope.userTask,scope.task)));for(var i=0;i<scope.task.navPages.length;i++)if(scope.task.navPages[i].name===name){scope.currentPageIndex=i;break}for(var i=0;i<scope.toolbars.length;i++)"back"===scope.toolbars[i].id&&(scope.toolbars[i].disabled=!(scope.currentPageIndex>0)),"forward"===scope.toolbars[i].id&&(scope.toolbars[i].disabled=!(scope.currentPageIndex<scope.task.navPages.length-1));resolve()}})})},scope.fluid.navTo=function(name){return scope.fluid.onPageChanging(name)?scope.navToPage(name).then(scope.loadGet()):void 0},scope.getToPage=function(name,param){return console.info("getToPage",scope.task.pages),q(function(resolve,reject){angular.forEach(scope.task.pages,function(page){if(name===page.name){scope.task.prevPage={},angular.copy(scope.task.page,scope.task.prevPage),scope.task.page=page;var uri=page.get;void 0!==param&&"null"!==param?(page.param=param,uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param):page.param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),scope.homeUrl=uri,scope.task.pinned===!0&&(scope.userTask.page=scope.task.page.name,scope.userTask.param=scope.task.page.param,scope.task.generic===!1&&-1===scope.task.id.indexOf("gen")&&(scope.userTask.fluidTaskId=scope.task.id.split("_")[0],scope.userTask.fluidId=scope.task.fluidId,scope.userTask.pinned=scope.task.pinned,f2.post("services/fluid_user_task_crud/save_task_state?field=pin",scope.userTask,scope.task)));for(var contains=!1,i=0;i<scope.task.navPages.length;i++)if(scope.task.navPages[i].name===name){contains=!0,scope.currentPageIndex=i;break}contains===!1&&(scope.task.navPages.push(page),scope.currentPageIndex=scope.task.navPages.length-1);for(var i=0;i<scope.toolbars.length;i++)"back"===scope.toolbars[i].id&&(scope.toolbars[i].disabled=!(scope.currentPageIndex>0)),"forward"===scope.toolbars[i].id&&(scope.toolbars[i].disabled=!(scope.currentPageIndex<scope.task.navPages.length-1));resolve()}})})},scope.fluid.goTo=function(name,param){return console.info("goTo",name),scope.fluid.onPageChanging(name,param)?scope.getToPage(name,param).then(scope.loadGet()):void 0},scope.$watch(function(scope){return scope.task.currentPage},function(newValue){newValue&&scope.fluid.goTo(newValue.name,newValue.param)}),scope.fluid.action=function(method,data,param){if(method){var uri="";"put"===method.toLowerCase()?(uri=scope.task.page.put,void 0!==param&&"null"!==param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),f2.put(uri,data,scope.task).success(function(rv){rs.$broadcast(scope.fluid.event.getSuccessEventId(),rv,method)}).error(function(data){scope.fluid.message.danger(data?data.msg:"Error creating request to "+uri),rs.$broadcast(scope.fluid.event.getErrorEventId(),data,method)})):"get"===method.toLowerCase()?(uri=scope.task.page.get,void 0!==param&&"null"!==param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),f2.get(uri,scope.task).success(function(rv){rv&&rv.msg&&scope.fluid.message.success(rv.msg),rs.$broadcast(scope.fluid.event.getSuccessEventId(),rv,method)}).error(function(data){data&&scope.fluid.message.danger(data.msg),rs.$broadcast(scope.fluid.event.getErrorEventId(),data,method)})):"delete"===method.toLowerCase()?(uri=scope.task.page.delURL,void 0!==param&&"null"!==param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),f2["delete"](uri,scope.task).success(function(rv){rv&&(rv&&rv.msg&&scope.fluid.message.success(rv.msg),rs.$broadcast(scope.fluid.event.getSuccessEventId(),rv,method))}).error(function(data){data&&scope.fluid.message.danger(data.msg),rs.$broadcast(scope.fluid.event.getErrorEventId(),data,method)})):"post"===method.toLowerCase()&&(uri=scope.task.page.post,void 0!==param&&"null"!==param&&(uri.search(scope.pathRegexPattern)>0?uri=scope.generateUrl(uri,param):uri+=param),f2.post(uri,data,scope.task).success(function(rv){rv&&rv.msg&&scope.fluid.message.success(rv.msg),rs.$broadcast(scope.fluid.event.getSuccessEventId(),rv,method)}).error(function(data){data&&scope.fluid.message.danger(data.msg),rs.$broadcast(scope.fluid.event.getErrorEventId(),data,method)}))}},scope.fluid.goToHome=function(){angular.forEach(scope.task.pages,function(page){if(page.isHome){scope.task.page=page,scope.homeUrl=page.get,page.param&&(scope.homeUrl=scope.homeUrl+page.param);for(var i=0;i<scope.toolbars.length;i++)"back"===scope.toolbars[i].id&&(scope.toolbars[i].disabled=!0),"forward"===scope.toolbars[i].id&&(scope.toolbars[i].disabled=!0);scope.currentPageIndex=0,scope.task.navPages=[page],scope.loadGet()}})},scope.$watch(function(scope){return scope.task},function(task){if(task&&task.generic)if(scope.task.page=void 0,scope.baseTask=ss.getSessionProperty(scope.task.url),scope.baseTask){console.info("fluid-panel-base-task-cache",scope.baseTask);var newTask=scope.task.newTask,$task={};scope.copy={},angular.copy(scope.task,scope.copy),console.info("fluid-panel-cache-task",scope.baseTask),f.fullScreen?(scope.task=f.buildTask(scope.baseTask),scope.task.id="fullscreen_"+scope.baseTask.id):(angular.forEach(f.taskList,function(task,key){task.id===scope.task.id&&(this.task=task,this.index=key)},$task),f.taskList[$task.index]=f.buildTask(scope.baseTask),f.taskList[$task.index].id=f.taskList[$task.index].id+"_"+$task.index,f.taskList[$task.index].origin=scope.task.origin,scope.task=f.taskList[$task.index]),scope.task.generic=!1,scope.task.newTask=newTask,scope.task.fluidHttpService=f2}else console.info("fluid-panel-base-task-new",scope.baseTask),f2.get(scope.task.url,scope.task).success(function(d){ss.addSessionProperty(scope.task.url,d);var newTask=scope.task.newTask,$task={};scope.copy={},angular.copy(scope.task,scope.copy),console.info("generated-taskp",d),f.fullScreen?(scope.task=f.buildTask(d),scope.task.id="fullscreen_"+d.id):(angular.forEach(f.taskList,function(task,key){task.id===scope.task.id&&(this.task=task,this.index=key)},$task),f.taskList[$task.index]=f.buildTask(d),f.taskList[$task.index].id=f.taskList[$task.index].id+"_"+$task.index,f.taskList[$task.index].origin=scope.task.origin,scope.task=f.taskList[$task.index]),scope.task.generic=!1,scope.task.newTask=newTask,scope.task.fluidHttpService=f2,console.info("task-initialization-finished",scope.task),console.info("generated-task-pages",scope.task.pages)})})},post:function(scope,element){var parent=element.parent();scope.$on(scope.fluid.getEventId("navTo"),function(event,name){scope.fluid.navTo(name)}),scope.$on(scope.fluid.getEventId("selectPage"),function(event,name){for(var i=scope.currentPageIndex,index=0;i<scope.task.navPages.length;i++)if(scope.task.navPages[index].name==name){i=index;break}var count=scope.task.navPages.length-(i+1),page=scope.task.navPages[i];scope.task.navPages.splice(i+1,count),scope.fluid.navTo(name),scope.task.page=page}),scope.$on(scope.fluid.event.getGoToEventId(),function(event,name,param){scope.fluid.goTo(name,param)}),scope.$on(scope.fluid.event.getOnTaskLoadedEventId(),function(event){}),scope.$on(EVENT_NOT_ALLOWED+scope.task.id,function(event,msg){scope.fluid.message.danger(msg),angular.forEach(scope.task.navPages,function(page,key){page.name===scope.task.navPages.name&&(scope.task.navPages.splice(key,1),scope.fluid.goTo(scope.task.prevPage.name))})}),scope.$watch(function(scope){return scope.task?scope.task:void 0},function(task){if(task){if(console.info("post-task-watcher",task),task.generic===!1){if(task.lazyLoad===!0){var pathArr=void 0;task.moduleFiles.indexOf(",")>0&&(pathArr=task.moduleFiles.split(","));var files=[];if(pathArr)for(var i=0;i<pathArr.length;i++)files.push(pathArr[i]);else files.push(task.moduleFiles);oc.load({name:task.moduleJS,files:files,cache:!0}).then(function(){t(function(){generateTask(scope,t,f2)})})}else t(function(){generateTask(scope,t,f2)});scope.task.refresh=function(){scope.task.page.autoGet?(scope.task.loaded=!1,f2.get(scope.homeUrl,scope.task).success(function(data){scope.task.page.load&&scope.task.page.load(data,"refresh"),scope.fluid.pageCallBack&&scope.fluid.pageCallBack(scope.task.page.name,data,"refresh"),scope.task.loaded=!0}).error(function(data){scope.task.loaded=!0})):(rs.$broadcast(scope.fluid.event.getRefreshId()),scope.fluid.onRefreshed())},scope.task.max25=function(clientState){scope.task.size=25,parent.removeClass("col-lg-12"),parent.removeClass("col-lg-8"),parent.removeClass("col-lg-6"),parent.addClass("col-lg-4"),task.showPageList=!1,(void 0===clientState||clientState===!1)&&(scope.task.page&&scope.task&&rs.$broadcast(scope.fluid.event.getResizeEventId(),scope.task.page.name,scope.task.size),scope.userTask.size=scope.task.size,scope.task.stateAjax?saveTaskSate(scope.task,scope.userTask,f2,"size").then(function(){generateTask(scope,t,f2)}):generateTask(scope,t,f2))},scope.task.max50=function(clientState){scope.task.size=50,parent.removeClass("col-lg-12"),parent.removeClass("col-lg-8"),parent.removeClass("col-lg-4"),parent.addClass("col-lg-6"),task.showPageList=!1,(void 0===clientState||clientState===!1)&&(scope.task.page&&scope.task&&rs.$broadcast(scope.fluid.event.getResizeEventId(),scope.task.page.name,scope.task.size),scope.userTask.size=scope.task.size,scope.task.stateAjax?saveTaskSate(scope.task,scope.userTask,f2,"size").then(function(){generateTask(scope,t,f2)}):generateTask(scope,t,f2))},scope.task.max75=function(clientState){scope.task.size=75,parent.removeClass("col-lg-12"),parent.removeClass("col-lg-6"),parent.removeClass("col-lg-4"),parent.addClass("col-lg-8"),fos.closeOption(),(void 0===clientState||clientState===!1)&&(scope.task.page&&scope.task&&rs.$broadcast(scope.fluid.event.getResizeEventId(),scope.task.page.name,scope.task.size),scope.userTask.size=scope.task.size,scope.task.stateAjax?saveTaskSate(scope.task,scope.userTask,f2,"size").then(function(){generateTask(scope,t,f2)}):generateTask(scope,t,f2))},scope.task.max100=function(clientState){scope.task.size=100,parent.removeClass("col-lg-8"),parent.removeClass("col-lg-6"),parent.removeClass("col-lg-4"),parent.addClass("col-lg-12"),fos.closeOption(),(void 0===clientState||clientState===!1)&&(scope.task.page&&scope.task&&rs.$broadcast(scope.fluid.event.getResizeEventId(),scope.task.page.name,scope.task.size),scope.userTask.size=scope.task.size,scope.task.stateAjax?saveTaskSate(scope.task,scope.userTask,f2,"size").then(function(){generateTask(scope,t,f2)}):generateTask(scope,t,f2))},scope.task.hide=function(){scope.task.onWindowHiding(scope.task.page)&&(scope.fluidFrameService.fullScreen&&scope.task.fluidScreen(),scope.task.active=!1,scope.userTask.active=scope.task.active,scope.task.stateAjax&&saveTaskSate(scope.task,scope.userTask,f2,"active"))},scope.task.close=function(){if(scope.task.onWindowClosing(scope.task.page))if(scope.task.stateAjax)saveTaskSate(scope.task,scope.userTask,f2,"close").then(function(){for(var i=0;i<f.taskList.length;i++){var task=f.taskList[i];scope.task.id===task.id&&f.taskList.splice(i,1),scope.fluidFrameService.fullScreen&&scope.task.fluidScreen(),rs.$$phase||scope.$apply()}scope.$destroy()});else{for(var i=0;i<f.taskList.length;i++){var task=f.taskList[i];scope.task.id===task.id&&f.taskList.splice(i,1),scope.fluidFrameService.fullScreen&&scope.task.fluidScreen(),rs.$$phase||scope.$apply()}scope.$destroy()}},scope.task.pin=function(){scope.task.pinned=!scope.task.pinned,scope.task.pinned===!0?(scope.userTask.page=scope.task.page.name,scope.userTask.param=scope.task.page.param,scope.task.onWindowPinned(scope.task.page)):(scope.userTask.page="",scope.userTask.param=""),scope.task.stateAjax&&(scope.userTask.fluidId=scope.task.fluidId,scope.userTask.pinned=scope.task.pinned,saveTaskSate(scope.task,scope.userTask,f2,"pin"))},scope.task.fullScreen=function(){f.toggleFullscreen(scope.task),rs.$$phase||scope.$apply(),task.showPageList=!1,fos.closeOption()},scope.task.fluidScreen=function(){f.toggleFluidscreen(),rs.$$phase||scope.$apply(),task.showPageList=!1,fos.closeOption()},scope.task&&!scope.fluidFrameService.fullscreen&&scope.task.size&&("25"==scope.task.size?scope.task.max25(!0):"50"==scope.task.size?scope.task.max50(!0):"75"==scope.task.size?scope.task.max75(!0):"100"==scope.task.size&&scope.task.max100(!0))}scope.fluidFrameService.fullScreen&&(parent.addClass("col-lg-12"),parent.removeClass("col-lg-8"),parent.removeClass("col-lg-4"),parent.removeClass("col-lg-6"))}}),scope.$watch(function(scope){return!scope.task.generic&&scope.fluidFrameService.fullScreen},function(fullScreen){if(fullScreen&&autoSizePanel(scope.task),scope.task.generic===!1){scope.task.loaded=!1;var loadGetFn=function(){scope.task&&(scope.task.preLoad(),scope.task.preLoaded=!0,scope.loadGet(),scope.task.preLoaded&&(scope.task.load(),scope.task.loaded=!0),scope.task.postLoad())};t(loadGetFn,500)}}),$(window).on("resize",function(){scope.fluidFrameService.fullScreen&&(scope.fluidFrameService.getFrame().css("overflow","hidden"),autoSizePanel(scope.task))}),element.ajaxStart(function(){t(function(){scope.task.loaded=!1,console.info("ajax-"+scope.task.name+"started:",scope.task)})}),element.ajaxStop(function(){t(function(){scope.task.loaded=!0,console.info("ajax-"+scope.task.name+"stopped:",scope.task)})})}}}}]).directive("fluidFrame",["fluidFrameService","$window","$rootScope","$timeout","$templateCache",function(f,w,rs,t,tc){return{restrict:"AE",transclude:!0,scope:!0,template:tc.get("templates/fluid/fluidFrame.html"),replace:!0,link:function(scope,element){scope.frame={},scope.fluidFrameService=f,scope.$watch(function(scope){return scope.fluidFrameService.fullScreen},function(fullScreen){var frameDiv=$(element.find("div.form-group")[1]);if(fullScreen){var height=window.innerHeight;height=estimatedFrameHeight(height);var frameHeight=height-22;scope.fluidFrameService.isSearch?frameDiv.attr("style","height:"+frameHeight+"px;overflow:hidden"):element.attr("style","height:"+frameHeight+"px;overflow:hidden"),$("body").attr("style","height: "+height+"px;overflow:hidden")}else{var height=window.innerHeight;height=estimatedFrameHeight(height);var frameHeight=height-22;scope.fluidFrameService.isSearch?frameDiv.attr("style","height:"+frameHeight+"px;overflow:auto"):element.attr("style","height:"+frameHeight+"px;overflow:auto"),$("body").attr("style","height: "+height+"px;overflow:hidden")}}),scope.show=function(task){task.pinned||(task.active=!task.active)},$(window).on("resize",function(){if(scope.fluidFrameService.fullScreen){var height=window.innerHeight;height=estimatedFrameHeight(height)-22,scope.fluidFrameService.isSearch?frameDiv.attr("style","height:"+frameHeight+"px;overflow:hidden"):element.attr("style","height:"+frameHeight+"px;overflow:hidden")}else{var height=window.innerHeight;height=estimatedFrameHeight(height);var frameHeight=height-22;scope.fluidFrameService.isSearch?frameDiv.attr("style","height:"+frameHeight+"px;overflow:auto"):element.attr("style","height:"+frameHeight+"px;overflow:auto")}$("body").attr("style","height: "+height+"px;overflow:hidden")}),scope.initTask=function(task){task&&scope.$watch(function(){return task.active},function(newValue,oldValue){!0===newValue&&(task.onWindowOpening?task.onWindowOpened():task.active=!1)})}}}}]).directive("fluidTool",["$rootScope","$compile","$templateCache",function(r,c,tc){return{scope:{task:"=",controls:"=",pages:"=",fluid:"=",size:"@",fixed:"="},restrict:"E",replace:!0,template:tc.get("templates/fluid/fluidToolbar.html"),link:function(scope,element,attr){attr.size?"small"===attr.size?scope.size="btn-group-xs":"medium"===attr.size?scope.size="btn-group-sm":"large"===attr.size&&(scope.size="btn-group-md"):scope.size="btn-group-md",scope.runEvent=function(control,$event){if(console.info("control",control),control.action)control.action($event);else{var event=control.id+"_fp_"+scope.task.id;r.$broadcast(event)}},scope.goToEvent=function(name,param){scope.fluid.navTo(name)},scope.getClass=function(uiType){return"info"===uiType.toLowerCase()?"btn-info":"danger"===uiType.toLowerCase()?"btn-danger":"warning"===uiType.toLowerCase()?"btn-warning":"inverse"===uiType.toLowerCase()?"btn-inverse":"success"===uiType.toLowerCase()?"btn-success":"primary"===uiType.toLowerCase()?"btn-primary":"btn-default"}}}}]).directive("fluidBar",["fluidFrameService","$templateCache","$compile","fluidHttpService","$templateCache",function(f,tc,c,f2,tc){return{restrict:"AEC",link:function(scope,element){scope.taskList=f.taskList,scope.open=function(task){task.active===!0?scope.scroll(task):(task.active=!0,-1===task.id.indexOf("gen")&&(scope.userTask={},scope.userTask.fluidTaskId=task.id.split("_")[0],scope.userTask.active=task.active,scope.userTask.fluidId=task.fluidId,f2.post("services/fluid_user_task_crud/save_task_state?field=active",scope.userTask,task)))},scope.scroll=function(task){$("body").scrollTo($("#_id_fp_"+task.id),800)}},replace:!0,template:tc.get("templates/fluid/fluidBar2.html")}}]).directive("fluidField",["$templateCache",function(tc){return{restrict:"AE",scope:{name:"@",model:"=",label:"@",type:"@",required:"=",disabled:"=",blur:"&"},template:tc.get("templates/fluid/fluidField.html"),replace:!0,link:function(scope,elem,attr){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),void 0===scope.type&&(scope.type="text")}}}]).directive("fluidTextArea",["$templateCache",function(tc){return{restrict:"AE",scope:{name:"@",model:"=",label:"@",required:"=",disabled:"=",rows:"=",cols:"="},template:tc.get("templates/fluid/fluidTextArea.html"),replace:!0,link:function(scope,elem,attr){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_"))}}}]).directive("fluidCheck",["$compile","$templateCache",function(c,tc){return{restrict:"AE",scope:{model:"=",label:"@",required:"=",disabled:"=",name:"@"},template:tc.get("templates/fluid/fluidCheckbox.html"),link:function(scope,element){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),void 0===scope.required&&(scope.required=!1),void 0===scope.disabled&&(scope.disabled=!1),void 0===scope.model&&(scope.model=!1),scope.update=function(){(void 0===scope.disabled||scope.disabled===!1||null===scope.disabled)&&(scope.model=!scope.model)}},replace:!0}}]).directive("fluidMessage",[function(){return{restrict:"AE",replace:!0,template:"<div></div>"}}]).directive("fluidModal",["fluidFrameService",function(f){return{restrict:"AE",template:"<div ng-class='fluidFrameService.fullScreen ? \"overlay-full\" : \"overlay\"' class='hidden animated fadeIn anim-dur'><div ng-style='style' class='fluid-modal animated pulse anim-dur'><div ng-transclude></div></div></div>",replace:!0,transclude:!0,link:function(scope,element,attr){scope.fluidFrameService=f,scope.style={},attr.height&&(scope.style.height=attr.height),attr.width&&(scope.style.width=attr.width)}}}]).directive("fluidSubTable",["$compile","fluidModalService","fluidHttpService","fluidFrameService","$rootScope",function(c,fm,f,f2,rs){return{restrict:"AE",transclude:!0,replace:!0,scope:{task:"=",fluid:"=",lookUp:"@",targetList:"=",targetUrl:"@",id:"@",title:"@",keyVar:"@",idField:"@",sourceUrl:"@",editUrl:"@",editEvent:"@",createEvent:"@"},template:"<div class='form-group'><div class='panel panel-primary'><div class='panel-heading'><a href='#' class='fluid-panel-heading-title' data-toggle='collapse' data-target='#{{id}}_collapse'>{{title}}</a><div class='pull-right'><div class='btn-group btn-group-xs'><button type='button' class='btn btn-info fluid-sub-table-control' ng-click='create()' ng-show='createEnabled'><span class='fa fa-plus'></span></button><button ng-show=\"lookUp == 'true'\" type='button' class='btn btn-info fluid-sub-table-control' ng-click='look()'><span class='fa fa-search'></span></button></div></div></div><div class='panel-collapse collapse in' id='{{id}}_collapse'><div class='panel-body' ><div ng-transclude></div><div class='container-fluid' style='overflow-y: auto'><table class='table table-responsive table-hover'></table></div></div></div></div>",
link:function(scope,element){if(scope.lookUp||(scope.lookUp="true"),scope.createEvent?scope.createEnabled=!0:scope.createEnabled=!1,scope.editEvent||scope.editUrl?scope.editEnabled=!0:scope.editEnabled=!1,void 0===scope.id){var parent=$(element[0]).parent(),size=$(parent).find("fluid-sub-table").length;scope.id="sb_tbl_"+size+"_"+scope.task.id}scope.targetList||(scope.targetList=[]);var parent=$(element[0]).parent().get(),modal=$("<div>").attr("id","{{id}}_add_tbl_mdl").addClass("overlay hidden animated fadeIn anim-dur").appendTo(parent).get(),modalContent=$("<div>").addClass("fluid-modal animated anim-dur").attr("id","{{id}}_mdl_cnt").appendTo(modal).get(),modalPanel=$("<div>").addClass("panel panel-primary").appendTo(modalContent).get(),modalPanelHeading=$("<div>").addClass("panel-heading").appendTo(modalPanel).get(),inputGroup=($("<span>").addClass("text-inverse").addClass("col-lg-5 col-md-5 col-sm-3 col-xs-3").html("Select "+scope.title).appendTo(modalPanelHeading).get(),$("<div>").addClass("col-lg-7 col-md-7 col-sm-9 col-xs-9").addClass("input-group").appendTo(modalPanelHeading).get()),inputSpan=($("<input>").addClass("form-control").attr("type","text").attr("ng-model","search").appendTo(inputGroup).get(),$("<span>").addClass("input-group-addon").appendTo(inputGroup).get());$("<i>").addClass("fa fa-search").appendTo(inputSpan);var modalPanelBody=$("<div>").addClass("panel-body").attr("style","overflow:auto;height:200px").appendTo(modalPanel).get(),modalPanelFooter=$("<div>").addClass("panel-footer").attr("style","height:50px").appendTo(modalPanel).get(),pullRightFooterDiv=$("<div>").addClass("pull-right").appendTo(modalPanelFooter).get(),buttonGroup=$("<div>").addClass("btn-group btn-group-sm").appendTo(pullRightFooterDiv).get(),columns=($("<button>").addClass("btn btn-info").attr("ng-click","close()").attr("type","button").html("close").appendTo(buttonGroup).get(),element.find("fluid-sub-column")),table=element.find("table"),thead=$("<thead>").appendTo(table).get(),theadRow=$("<tr>").appendTo(thead).get(),tbody=$("<tbody>").appendTo(table).get(),modalTable=$("<table>").addClass("table table-responsive table-hovered table-bordered").appendTo(modalPanelBody).get(),mThead=$("<thead>").appendTo(modalTable).get(),mTheadRow=$("<tr>").appendTo(mThead).get(),mTbody=$("<tbody>").appendTo(modalTable).get(),tr=$("<tr>").addClass("animated").addClass("slideInDown").addClass("anim-dur").attr("ng-repeat",scope.keyVar+" in targetList").appendTo(tbody).get(),mTr=$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","addToList("+scope.keyVar+")").appendTo(mTbody).get();void 0!==scope.targetUrl&&f.get(scope.targetUrl,scope.task).success(function(data){scope.targetList=data}),$("<th>").html("Action").appendTo(theadRow);var tdAction=$("<td>").appendTo(tr).get(),buttonGroupDiv=$("<div>").addClass("btn-group").addClass("btn-group-xs").appendTo(tdAction).get();if(scope.editEnabled){$("<button>").addClass("btn btn-info").addClass("glyphicon glyphicon-edit").addClass("horizontalSpace").attr("type","button").attr("title","edit").attr("ng-click","edit("+scope.keyVar+"."+scope.idField+",$index)").appendTo(buttonGroupDiv).get()}for(var i=($("<button>").addClass("btn btn-danger").addClass("glyphicon glyphicon-minus").addClass("horizontalSpace").attr("type","button").attr("title","remove").attr("ng-click","remove($index)").appendTo(buttonGroupDiv).get(),0);i<columns.length;i++){var col=$(columns[i]);$("<th>").addClass(col.attr("column-class")).html(col.attr("title")).appendTo(theadRow),$("<th>").addClass(col.attr("column-class")).html(col.attr("title")).appendTo(mTheadRow),void 0!==col.attr("render-with")?($("<td>").addClass(col.attr("column-class")).html(col.attr("render-with")).appendTo(tr),$("<td>").addClass(col.attr("column-class")).html(col.attr("render-with")).appendTo(mTr)):($("<td>").addClass(col.attr("column-class")).html("{{"+col.attr("model")+"}}").appendTo(tr),$("<td>").addClass(col.attr("column-class")).html("{{"+col.attr("model")+"}}").appendTo(mTr))}scope.create=function(){rs.$broadcast(scope.createEvent+"_fp_"+scope.task.id)},scope.edit=function(param,index){scope.editUrl?f2.addTask(scope.editUrl+param,scope.task,!0):scope.editEvent&&rs.$broadcast(scope.editEvent+"_fp_"+scope.task.id,param,index)},scope.look=function(){scope.sourceUrl&&f.get(scope.sourceUrl,scope.task).success(function(data){scope.sourceList=data}),fm.show(scope.id+"_add_tbl_mdl"),$(modalContent).addClass("pulse"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(modalContent).removeClass("pulse")})},scope.remove=function(index){scope.targetList.splice(index,1)},scope.addToList=function(item){if(void 0!==scope.targetList){for(var exists=!1,i=0;i<scope.targetList.length;i++){var it=scope.targetList[i];if(item.id===it.id){exists=!0;break}}exists?($(modalContent).addClass("shake"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(modalContent).removeClass("shake")})):(scope.targetList.push(item),scope.close())}else $(modalContent).addClass("shake"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(modalContent).removeClass("shake")})},scope.close=function(){fm.hide(scope.id+"_add_tbl_mdl",scope.id)},$(element.find("div[ng-transclude]")).remove(),c(table)(scope),c(modal)(scope)}}}]).directive("fluidSubColumn",[function(){return{restrict:"AE",scope:{title:"@",model:"=",columnClass:"@",renderWith:"@"}}}]).directive("fluidLookUp",["$compile","fluidModalService","fluidHttpService","fluidFrameService","$timeout","$templateCache",function(c,fm,f,f2,t,tc){return{restrict:"AE",scope:{task:"=",model:"=",sourceUrl:"@",label:"@",fieldLabel:"@",disabled:"=",required:"=",id:"@",keyVar:"@",fieldValue:"@",parentId:"@",name:"@"},link:function(scope,element){if(!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),void 0===scope.id){var currentElement=$(element).get(),index=$(currentElement).index();scope.id="lookUp_modal_"+index+"_"+scope.task.id}t(function(){scope.sourceList=[];var parent=$(element[0]).parent().get();if(scope.parentId)for(;$(parent).attr("id")!==scope.parentId&&(parent=$(parent).parent().get(),void 0!==parent););var modal=$("<div>").attr("id","{{id}}_add_tbl_mdl").addClass("overlay hidden animated fadeIn anim-dur").appendTo(parent).get(),modalContent=$("<div>").addClass("fluid-modal animated anim-dur").attr("id","{{id}}_mdl_cnt").appendTo(modal).get(),modalPanel=$("<div>").addClass("panel panel-primary").appendTo(modalContent).get(),modalPanelHeading=$("<div>").addClass("panel-heading").appendTo(modalPanel).get(),inputGroup=($("<span>").addClass("text-inverse").addClass("col-lg-5 col-md-5 col-sm-3 col-xs-3").html("Select "+scope.label).appendTo(modalPanelHeading).get(),$("<div>").addClass("col-lg-7 col-md-7 col-sm-9 col-xs-9").addClass("input-group").appendTo(modalPanelHeading).get()),inputSpan=($("<input>").addClass("form-control").attr("type","text").attr("ng-model","search").appendTo(inputGroup).get(),$("<span>").addClass("input-group-addon").appendTo(inputGroup).get());$("<i>").addClass("fa fa-search").appendTo(inputSpan);var modalPanelBody=$("<div>").addClass("panel-body").attr("style","overflow:auto;height:200px").appendTo(modalPanel).get(),modalPanelFooter=$("<div>").addClass("panel-footer").attr("style","height:50px").appendTo(modalPanel).get(),pullRightFooterDiv=$("<div>").addClass("pull-right").appendTo(modalPanelFooter).get(),buttonGroup=$("<div>").addClass("btn-group btn-group-sm").appendTo(pullRightFooterDiv).get(),columns=($("<button>").addClass("btn btn-info").attr("ng-click","close()").attr("type","button").html("close").appendTo(buttonGroup).get(),element.find("fluid-sub-column")),modalTable=$("<table>").addClass("table table-responsive table-hover").appendTo(modalPanelBody).get(),mThead=$("<thead>").appendTo(modalTable).get(),mTheadRow=$("<tr>").appendTo(mThead).get(),mTbody=$("<tbody>").appendTo(modalTable).get(),mTr=null;mTr=scope.fieldValue?scope.fieldLabel?$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","select("+scope.keyVar+"."+scope.fieldValue+","+scope.keyVar+"."+scope.fieldLabel+")").appendTo(mTbody).get():$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","select("+scope.keyVar+"."+scope.fieldValue+")").appendTo(mTbody).get():scope.fieldLabel?$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","select("+scope.keyVar+","+scope.keyVar+"."+scope.fieldLabel+")").appendTo(mTbody).get():$("<tr>").attr("ng-repeat",scope.keyVar+" in sourceList | filter:search").attr("ng-click","select("+scope.keyVar+")").appendTo(mTbody).get();for(var i=0;i<columns.length;i++){var col=$(columns[i]);$("<th>").addClass(col.attr("column-class")).html(col.attr("title")).appendTo(mTheadRow),void 0!==col.attr("render-with")?$("<td>").addClass(col.attr("column-class")).html(col.attr("render-with")).appendTo(mTr):$("<td>").addClass(col.attr("column-class")).html("{{"+col.attr("model")+"}}").appendTo(mTr)}var ctnr=void 0;ctnr=scope.fieldLabel?element.find("input").attr("ng-model","model."+scope.fieldLabel):element.find("input").attr("ng-model","model"),$(element.find("div[ng-transclude]")).remove(),c(ctnr)(scope),c(modal)(scope),scope.look=function(){scope.sourceUrl&&f.get(scope.sourceUrl,scope.task).success(function(data){scope.sourceList=data}),fm.show(scope.id+"_add_tbl_mdl"),$(modalContent).addClass("pulse"),$(modalContent).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(modalContent).removeClass("pulse")})}}),scope.close=function(){fm.hide(scope.id+"_add_tbl_mdl",scope.id)},scope.select=function(item,label){scope.model=item,scope.modelLabel=label,scope.close()},scope.reset=function(event){var value=$(event.target).attr("value");$(event.target).attr("value",value)},scope.isModeled=function(){return void 0!==scope.model},scope.isNotModeled=function(){return void 0===scope.model},scope.clear=function(){scope.model=void 0}},template:tc.get("templates/fluid/fluidLookup.html"),replace:!0,transclude:!0}}]).directive("fluidSelect",["fluidHttpService","$compile","$timeout","$templateCache",function(f,c,t,b,tc){return{scope:{id:"@",task:"=",model:"=",label:"@",fieldGroup:"@",fieldValue:"@",fieldLabel:"@",sourceUrl:"@",disabled:"=",required:"=",change:"&",name:"@"},link:function(scope,element,attr){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),scope.id||(scope.id="fl_slt_"+scope.task.id),(void 0===scope.required||"undefined"===scope.required)&&(scope.required=!1),(void 0===scope.disabled||"undefined"===scope.disabled)&&(scope.disabled=!1);var options="";options=void 0===scope.fieldValue?"item":"item."+scope.fieldValue,void 0===scope.fieldLabel||(options+=" as item."+scope.fieldLabel),scope.fieldGroup&&(options+=" group by item."+scope.fieldGroup),options+=" for item in sourceList";element.find("select").attr("ng-options",options).attr("ng-model","model").get();scope.$watch(function(scope){return scope.sourceUrl},function(value,old){console.info("fluid-select.sourceUrl",value),value&&f.get(scope.sourceUrl,scope.task).success(function(sourceList){scope.sourceList=sourceList})}),scope.$watch(function(scope){return attr.values},function(value,old){console.info("fluid-select.values",value),value&&(scope.sourceList=value.split(","))}),scope.$watch(function(scope){return scope.disabled},function(newValue){newValue===!1&&element.removeAttr("disabled")}),scope.$watch(function(scope){return scope.model},function(newValue){scope.change({item:newValue})}),c(element.contents())(scope)},template:tc.get("templates/fluid/fluidSelect.html"),replace:!0}}]).directive("fluidPermissionEnabled",["fluidHttpService","$compile","sessionService",function(f,c,ss){return{restrict:"A",scope:{task:"=",page:"="},link:function(scope,element,attr){attr.method&&(scope.method=attr.method),console.info("permissionEnabled-url",f.permissionUrl+"?pageName="+scope.page.name+"&method="+scope.method);var url=f.permissionUrl+"?pageName="+scope.page.name+"&method="+scope.method,enabled=ss.getSessionProperty(url);console.info("permissionEnabled",enabled),null!==enabled&&(console.info("permissionEnabled-old",enabled),"false"===enabled&&element.attr("disabled","")),null===enabled&&(f.get(url,scope.task).success(function(data){data||element.attr("disabled",""),ss.addSessionProperty(url,data)}),console.info("permissionEnabled-new"))}}}]).directive("fluidPermissionVisible",["fluidHttpService","$compile","sessionService",function(f,c,ss){return{restrict:"A",scope:{task:"=",page:"="},link:function(scope,element,attr){attr.method&&(scope.method=attr.method),console.info("permissionVisible-url",f.permissionUrl+"?pageName="+scope.page.name+"&method="+scope.method);var url=f.permissionUrl+"?pageName="+scope.page.name+"&method="+scope.method,visible=ss.getSessionProperty(url);console.info("permissionVisible",visible),null!==visible&&(console.info("permissionVisible-old",visible),"false"===visible?(element.addClass("hidden"),console.info("permissionVisible-hidden")):(console.info("permissionVisible-visible"),element.removeClass("hidden"))),null===visible&&f.get(url,scope.task).success(function(data){data||element.addClass("hidden"),ss.addSessionProperty(url,data)})}}}]).directive("fluidTooltip",[function(){return{restrict:"A",link:function(scope,element,attr){scope.tooltipTime=400,attr.tooltipTime&&(scope.tooltipTime=attr.tooltipTime),attr.tooltipHeaderTitle&&(scope.tooltipHeaderTitle=attr.tooltipHeaderTitle),attr.tooltipPosition&&(scope.tooltipPosition=attr.tooltipPosition),attr.tooltipEvent&&(scope.tooltipEvent=attr.tooltipEvent),attr.tooltipTitle&&(scope.tooltipTitle=attr.tooltipTitle),attr.tooltipMy&&(scope.my=attr.tooltipMy),attr.tooltipAt&&(scope.at=attr.tooltipAt),scope.tooltipPosition||(scope.tooltipPosition='{"my":"top center","at":"bottom center"}'),scope.tooltipEvent||(scope.tooltipEvent="hover"),scope.position=JSON.parse(scope.tooltipPosition),scope.my&&(scope.position.my=scope.my),scope.at&&(scope.position.at=scope.at),scope.tooltip=$(element[0]).qtip({content:{title:scope.tooltipHeaderTitle,text:scope.tooltipTitle},position:{at:scope.position.at,my:scope.position.my,adjust:{method:"none shift"}},hide:{event:"click",inactive:scope.tooltipTime},style:"qtip-dark"}),scope.api=scope.tooltip.qtip("api"),scope.$watch(function(){return $(element[0]).attr("tooltip-title")},function(newValue){scope.api.set("content.text",newValue)})}}}]).directive("fluidEdit",[function(){return{restrict:"AE",replace:!0,transclude:!0,template:"<div class='form-group'><label class='control-label col-sm-2'>{{label}}<span style='color: #ea520a' ng-show='required'>*</span></label><div class='col-sm-10 marginBottom5px' ng-transclude></div></div>",link:function(scope,element,attr){attr.label&&(scope.label=attr.label),attr.required&&("true"===attr.required.toLowerCase()?scope.required=!0:scope.required=!1)}}}]).directive("fluidImage",["$timeout","$upload","sessionService","fluidHttpService","$templateCache",function(t,u,ss,fh,tc){return{scope:{model:"=",label:"@",required:"=",url:"@",method:"@",task:"=",sourceUrl:"@",fileChanged:"&",defaultImage:"@",disabled:"="},template:tc.get("templates/fluid/fluidImage.html"),replace:!0,link:function(scope){scope.fileReaderSupported=null!=window.FileReader&&(null==window.FileAPI||0!=FileAPI.html5),scope.preview=[],scope.notDone=!0;var tries=0;scope.defaultImage||(scope.defaultImage="../assets/gallery/default.png"),scope.refresh=function(){t(function(){console.info("model",scope.model),scope.model?(console.info("model-2",scope.model),scope.sourceUrl&&(scope.preview[0]={},scope.preview[0].dataUrl=fh.host+scope.sourceUrl+scope.model),5==tries?(tries=0,scope.notDone=!1):(tries++,scope.refresh())):(scope.model||(scope.preview[0]={},scope.preview[0].dataUrl=scope.defaultImage),5==tries?(tries=0,scope.notDone=!1):(tries++,scope.refresh()))},1e3)},scope.refresh(),scope.onFileSelect=function(file){null!=file&&scope.fileReaderSupported&&file.type.indexOf("image")>-1&&t(function(){var fileReader=new FileReader;fileReader.readAsDataURL(file),fileReader.onload=function(e){t(function(){file.dataUrl=e.target.result})};var bufferRead=new FileReader;bufferRead.readAsArrayBuffer(file),bufferRead.onload=function(e){t(function(){file.data=e.target.result,u.upload({url:fh.host+scope.url,method:scope.method,headers:{"fluid-container-id":"_id_fpb_"+scope.task.id,Authorization:ss.getSessionProperty(AUTHORIZATION),fluidPage:scope.task.currentPage,fluidUploadFileId:scope.model},data:{file:file}}).progress(function(evt){file.progress=parseInt(100*evt.loaded/evt.total)}).success(function(data,status,headers,config){$("#_id_fpb_"+scope.task.id).loadingOverlay("remove"),scope.model=data.id,scope.fileChanged()}).error(function(data,status,headers,config){$("#_id_fpb_"+scope.task.id).loadingOverlay("remove")})})}})}}}}]).directive("fluidLoader",["fluidLoaderService",function(fls){return{restrict:"AE",scope:{loaderClass:"@"},transclude:!0,template:"<span><i class='text-inverse' ng-show='!fluidLoaderService.loaded' ng-class='loaderClass'></i><span ng-show='fluidLoaderService.loaded' ng-transclude></span></span>",replace:!0,link:function(scope,element){scope.fluidLoaderService=fls,scope.fluidLoaderService.loaded=!0}}}]).directive("fluidLoader",["fluidLoaderService",function(fls){return{restrict:"AE",scope:{idleClass:"@"},transclude:!0,template:"<span><i class='text-inverse' ng-show='fluidLoaderService.loaded' ng-class='idleClass'></i><span ng-show='!fluidLoaderService.loaded' ng-transclude></span></span>",replace:!0,link:function(scope,element){scope.fluidLoaderService=fls,scope.fluidLoaderService.loaded=!0}}}]).directive("fluidDatePicker",["$filter","$templateCache",function(f,tc){return{restrict:"AE",scope:{name:"@",model:"=",label:"@",format:"@",required:"=",disabled:"="},template:tc.get("templates/fluid/fluidDatePicker.html"),replace:!0,link:function(scope,elem,attr){scope.model&&(scope.temp=scope.model),void 0===scope.format&&(scope.format="mm/dd/yyyy");$(elem[0]).find(".datepicker").datepicker({format:scope.format,forceParse:!1,language:"en"});!scope.name&&scope.label&&(scope.name=scope.label.trim()),scope.convertToTimestamp=function(){var date=$(elem[0]).find(".datepicker").datepicker("getDate"),convertedDate=new Date(date).getTime();scope.model=convertedDate}}}}]).directive("fluidRadio",["$compile","$templateCache",function(c,tc){return{scope:{name:"@",model:"=",label:"@",required:"=",disabled:"=",direction:"@",group:"@",options:"="},restrict:"AE",replace:!0,template:tc.get("templates/fluid/fluidRadio.html"),link:function(scope,element){!scope.name&&scope.label&&(scope.name=scope.label.trim().split(" ").join("_")),void 0===scope.group&&(scope.group="optRadio"),void 0===scope.direction&&(scope.direction="horizontal");for(var parentDiv=(element[0],$(element[0]).find(".fluid-radio").get()),div=void 0,i=0;i<scope.options.length;i++){var option=scope.options[i];div?"vertical"===scope.direction&&(div=$("<div>").addClass("radio").appendTo(parentDiv)):(div=$("<div>").addClass("radio").appendTo(parentDiv),"horizontal"===scope.direction&&$(div).addClass("fluid-radio-horizontal")),scope.disabled&&(option.disabled=scope.disabled),scope.required&&(option.required=scope.required);var label=$("<label>").html(option.label).appendTo(div).get(),radio=$("<input>").attr("name",scope.group).attr("type","radio").attr("ng-click","select('"+option.value+"')").prependTo(label).get();option.disabled&&$(radio).attr("ng-disabled",option.disabled),option.required&&$(radio).attr("ng-required",option.required),scope.model&&option.value===scope.model&&$(radio).prop("checked",!0)}scope.select=function(value){scope.model=value},c(element.contents())(scope)}}}]).directive("fluidUploader",["$upload","$templateCache",function(u,tc){return{restict:"AE",link:function(scope,element,attr){},template:tc.get("templates/fluid/fluidUploader.html")}}]).directive("fluidTaskIcon",["$templateCache",function(tc){return{restrict:"AE",scope:!1,link:function(scope,element,attr){attr.height&&(scope.height=attr.height),attr.width&&(scope.width=attr.width)},template:tc.get("templates/fluid/fluidTaskIcon.html"),replace:!0}}]).directive("column",["$rootScope",function(rs){return{restrict:"A",scope:!1,link:function(scope,element,attr){attr.column&&(scope.column=attr.column),scope.$watch(function(scope){return attr.column},function(column,oldColumn){console.info("column-old",oldColumn),console.info("column",column),element.removeClass("col-lg-"+oldColumn),element.addClass("col-lg-"+column),scope.column=column}),element.addClass("col-md-12").addClass("col-sm-12").addClass("col-xs-12"),scope.$watch(function(scope){return scope.task?scope.task.size:void 0},function(size){switch(size){case 25:element.removeClass("col-lg-"+scope.column),element.addClass("col-lg-12").addClass("col-md-12").addClass("col-sm-12").addClass("col-xs-12");break;case 50:"lg"===rs.viewport?(element.removeClass("col-md-"+scope.column),element.addClass("col-lg-"+scope.column)):"md"===rs.viewport?(element.removeClass("col-lg-"+scope.column),element.addClass("col-md-"+scope.column)):"sm"===rs.viewport?(element.removeClass("col-lg-"+scope.column),element.removeClass("col-md-"+scope.column),element.addClass("col-sm-12")):"xs"===rs.viewport&&(element.removeClass("col-lg-"+scope.column),element.removeClass("col-md-"+scope.column),element.addClass("col-xs-12"));break;case 75:"lg"===rs.viewport?(element.removeClass("col-md-"+scope.column),element.addClass("col-lg-"+scope.column)):"md"===rs.viewport?(element.removeClass("col-lg-"+scope.column),element.addClass("col-md-12")):"sm"===rs.viewport?(element.removeClass("col-lg-"+scope.column),element.removeClass("col-md-"+scope.column),element.addClass("col-sm-12")):"xs"===rs.viewport&&(element.removeClass("col-lg-"+scope.column),element.removeClass("col-md-"+scope.column),element.addClass("col-xs-12"));break;case 100:"lg"===rs.viewport?(element.removeClass("col-md-"+scope.column),element.addClass("col-lg-"+scope.column)):"md"===rs.viewport?(element.addClass("col-md-"+scope.column),element.removeClass("col-lg-"+scope.column)):"sm"===rs.viewport?(element.removeClass("col-lg-"+scope.column),element.removeClass("col-md-"+scope.column),element.addClass("col-sm-12")):"xs"===rs.viewport&&(element.removeClass("col-lg-"+scope.column),element.removeClass("col-md-"+scope.column),element.addClass("col-xs-12"))}console.info("column-size",size)})}}}]).directive("fluidOption",["$templateCache","fluidOptionService",function(tc,fos){return{restrict:"AE",scope:!1,replace:!0,transclude:!0,template:tc.get("templates/fluid/fluidOption.html"),link:function(scope,element,attr){scope.fluidOptionService=fos,attr.useTemplate&&(scope.useTemplate="true"===attr.useTemplate),attr.id&&(scope.id=attr.id),scope.$watch(function(scope){return attr.templateName},function(template){scope.templateName=scope.task.id+"_"+template}),scope.$watch(function(scope){return element.parent().height()},function(height){console.info("fluidOption-parent-task",scope.task),console.info("fluidOption-parent-height",height),scope.parentHeight=height,element.css("max-height",height-20),element.css("width",element.parent().width())})}}}]).directive("fluidTemplate",["$templateCache",function(tc){return{restrict:"AE",scope:!1,template:tc.get("templates/fluid/fluidTemplate.html"),transclude:!0,replace:!0,link:function(scope,element,attr){attr.templateName&&(scope.templateId=scope.task.id+"_"+attr.templateName)}}}]),fluidComponents.service("fluidFrameService",["fluidHttpService","$timeout",function(f,t){return this.isSearch=!1,this.searchTask="",this.taskUrl="services/fluid_task_service/getTask?name=",this.fullScreen=!1,void 0===this.taskList&&(this.taskList=[]),this.pushTask=function(task){this.taskList.push(task)},this.addTask=function(url,origin,newTask){var genericTask=this.createGenericTask();genericTask.origin=origin,this.taskList.push(genericTask),genericTask.index=this.taskList.length-1,genericTask.url=url;var index=this.taskList.length-1;this.fullScreen&&this.toggleFluidscreen(),t(function(){$(".frame-content").scrollTo($("div.panel[task]:eq("+index+")"),200)},300)},this.toggleSearch=function(){this.isSearch=!this.isSearch,this.isSearch===!1&&(this.searchTask="")},this.toggleFullscreen=function(task){this.fullScreen=!0,this.fullScreenTask=task,t(function(){$(".frame-content").scrollTop(0)})},this.toggleFluidscreen=function(){this.fullScreen=!1,this.fullScreenTask=void 0},this.getFullTask=function(task){console.info("getFullTask",task);var fullScreenTask=void 0;if(task){var fullScreenTask=this.createGenericTask();fullScreenTask.url=this.taskUrl+task.name,fullScreenTask.size=100,console.info("task",fullScreenTask)}return fullScreenTask},this.createGenericTask=function(){var genericTask=Task();genericTask.id="gen_id_";var countGeneric=0;return angular.forEach(this.taskList,function(task){(task.id+"").indexOf("gen_id_")>-1&&countGeneric++}),genericTask.id=genericTask.id+""+countGeneric,genericTask.size=50,genericTask.active=!0,genericTask.glyph="fa fa-tasks",genericTask.title="...",genericTask.generic=!0,genericTask},this.getFrame=function(){return $("div.frame-content.frame-fullscreen")},this.buildTask=function(task){return task.preLoad=function(){},task.load=function(){},task.postLoad=function(){},task.onWindowClosing=function(page){return!0},task.onWindowHiding=function(page){return!0},task.onWindowOpening=function(){return!0},task.onWindowOpened=function(){},task.onWindowPinned=function(page){},task.onWindowActive=function(page){},task},this.showActionBar=function(){this.actionBarClass="animated slideInUp",this.actionBarShowing=!0},this.hideActionBar=function(){this.actionBarClass="animated slideOutDown",this.actionBarShowing=!1},this}]).service("fluidHttpService",["$rootScope","$http","fluidLoaderService","$q","$timeout","sessionService",function(rs,h,fl,q,t,ss){return this.httpSerialKey=(new Date).getTime(),this.post=function(url,data,task){task.loaded=!1;var promise=null;this.host&&(url=this.host+url);var headers={"fluid-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"};return task.currentPage&&(headers.method="post",headers.fluidPage=task.currentPage),void 0===data?(promise=h({method:"post",url:url,headers:headers}),promise.success(function(config){}),promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise.then(function(){task.loaded=!0}),promise):(promise=h({method:"post",url:url,data:data,headers:headers}),promise.success(function(config){this.httpSerialKey=(new Date).getTime()}),promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED"):403===status&&rs.$broadcast("NOT_ALLOWED"),task.loaded=!0}),promise.then(function(){task.loaded=!0}),promise)},this.postGlobal=function(url,data){var promise=null;return this.host&&(url=this.host+url),promise=h(void 0===data?{method:"post",url:url}:{method:"post",url:url,data:data})},this.put=function(url,data,task){task.loaded=!1;var promise=null;this.host&&(url=this.host+url);var headers={"fluid-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"};return task.currentPage&&(headers.method="put",headers.fluidPage=task.currentPage),void 0===data?(promise=h({method:"put",url:url,headers:headers}),promise.success(function(config){$("#_id_fpb_"+task.id).loadingOverlay("remove")}),promise.error(function(data,status,headers,config){$("#_id_fpb_"+task.id).loadingOverlay("remove"),401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise):(promise=h({method:"put",url:url,data:data,headers:headers}),promise.success(function(config){this.httpSerialKey=(new Date).getTime()}),promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED"):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg),task.loaded=!0}),promise.then(function(){task.loaded=!0}),promise)},this.putGlobal=function(url,data){var promise=null;this.host&&(url=this.host+url);var headers={"Content-type":"application/json"};return void 0===data?(promise=h({method:"put",url:url,headers:headers}),promise.error(function(data,status,headers,config){401===status&&rs.$broadcast("NOT_AUTHENTICATED",data.msg)}),promise):(promise=h({method:"put",url:url,data:data,headers:headers}),promise.error(function(data,status,headers,config){401===status&&rs.$broadcast("NOT_AUTHENTICATED"),task.loaded=!0}),promise)},this.getLocal=function(url){this.host&&(url=this.host+url);var promise=h({method:"get",url:url});return promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast("NOT_ALLOWED",data.msg)}),promise},this.getGlobal=function(url,progress,cache){fl.enabled=progress,this.host&&(url=this.host+url);var promise=h({method:"get",url:url});return promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast("NOT_ALLOWED",data.msg)}),promise},this.get=function(url,task){task.loaded=!1,this.host&&(url=this.host+url);var headers={"Content-type":"application/json"};task.currentPage&&(headers.method="get",headers.fluidPage=task.currentPage);var key=url+this.httpSerialKey,sessionValue=ss.getSessionProperty(key);console.info("fluid-http-server-cache-session-value",sessionValue);var promise=h({method:"get",url:url,headers:headers});return promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise.then(function(){task.loaded=!0}),promise.success(function(data,status,headers,config,statusText){var response={};response.data=data,response.status=status,response.headers=headers,response.config=config,response.statusText=statusText,ss.addSessionProperty(key,response),console.info("fluid-http-server-new-session-key",key),console.info("fluid-http-server-new-session-value",data)}),promise},this["delete"]=function(url,task){task.loaded=!1,this.host&&(url=this.host+url);var headers={"fluid-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"};task.currentPage&&(headers.method="delete",headers.fluidPage=task.currentPage);var promise=null;return promise=h({method:"delete",url:url,headers:headers}),promise.success(function(config){}),promise.error(function(data,status,headers,config){401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg),task.loaded=!0}),promise.then(function(){task.loaded=!0}),promise},this.updateResource=function(url,data,task){var headers={"fluid-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"};return task.currentPage&&(headers.method="get",headers.fluidPage=task.currentPage),console.log(url),void 0===data?(promise=h({method:"get",url:url,headers:headers}),promise.success(function(config){$("#_id_fpb_"+task.id).loadingOverlay("remove")}),promise.error(function(data,status,headers,config){$("#_id_fpb_"+task.id).loadingOverlay("remove"),401===status?rs.$broadcast("NOT_AUTHENTICATED",data.msg):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise):(promise=h({method:"get",url:url,data:data,headers:headers}),promise.success(function(config){task.loaded=!0}),promise.error(function(data,status,headers,config){task.loaded=!0,401===status?rs.$broadcast("NOT_AUTHENTICATED"):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise.then(function(){task.loaded=!0}),promise)},this.headers=function(task){return{"fluid-container-id":"_id_fpb_"+task.id,"Content-type":"application/json"}},this.query=function(query,task){
task&&(task.loaded=!1);var promise=h(query);return promise.error(function(data,status,headers,config){task&&(task.loaded=!0),401===status?rs.$broadcast("NOT_AUTHENTICATED"):403===status&&rs.$broadcast(EVENT_NOT_ALLOWED+task.id,data.msg)}),promise.then(function(){task&&(task.loaded=!0)}),promise},this}]).service("fluidControlService",[function(){return this.controls=[],this}]).service("fluidMessageService",["$timeout",function(t){var fluidMessageService={};return fluidMessageService.duration=1e3,fluidMessageService.info=function(id,message,duration){return fluidMessageService.id=id,fluidMessageService.message=message,fluidMessageService.alertType="alert alert-info",fluidMessageService.duration=duration,fluidMessageService},fluidMessageService.warning=function(id,message,duration){return fluidMessageService.id=id,fluidMessageService.message=message,fluidMessageService.alertType="alert alert-warning",fluidMessageService.duration=duration,fluidMessageService},fluidMessageService.danger=function(id,message,duration){return fluidMessageService.id=id,fluidMessageService.message=message,fluidMessageService.alertType="alert alert-danger",fluidMessageService.duration=duration,fluidMessageService},fluidMessageService.success=function(id,message,duration){return fluidMessageService.id=id,fluidMessageService.message=message,fluidMessageService.alertType="alert alert-success",fluidMessageService.duration=duration,fluidMessageService},fluidMessageService.open=function(){var messageId="#"+fluidMessageService.id,alerts=$(messageId).find("div[fluid-msg]").get(),index=0;alerts&&(index=alerts.length);var alertContainer=$(messageId).get(),alert=$("<div>").attr("fluid-msg",index).addClass(fluidMessageService.alertType).appendTo(alertContainer).get();$("<button>").attr("type","button").addClass("close icon-cross").attr("data-dismiss","alert").appendTo(alert).get(),$("<span>").html(fluidMessageService.message).appendTo(alert),t(function(){$(alert).remove()},fluidMessageService.duration)},fluidMessageService.close=function(messageId){$(messageId).find("p").html(""),$(messageId).removeClass(fluidMessageService.alertType),$(messageId).alert("close")},fluidMessageService}]).service("fluidModalService",[function(){var fluidModalService={};return fluidModalService.show=function(id){$("#"+id).removeClass("hidden"),$(".frame-content").scrollTo($("#"+id),800)},fluidModalService.hide=function(id,sourceId){$("#"+id).addClass("hidden"),sourceId&&$(".frame-content").scrollTo($("#"+sourceId),800)},fluidModalService}]).service("fluidLoaderService",[function(){return this.loaded=!0,this.enabled=!0,this}]).service("fluidNotificationService",[function(){return this.fluidNotifications=[],this}]).service("sessionService",["localStorageService",function(ls){this.isSessionSupported=ls.isSupported,this.type=function(){return this.isSessionSupported?"session storage":"cookie storage"},this.isSessionOpened=function(){return null!==ls.get(AUTHORIZATION)},this.addSessionProperty=function(key,value){this.isSessionSupported?ls.set(key,value):ls.cookie.set(key,value)},this.getSessionProperty=function(key){return this.isSessionSupported?ls.get(key):ls.cookie.get(key)},this.login=function(username,password,remember){var base64=window.btoa(username+":"+password);this.addSessionProperty("remember",remember),this.addSessionProperty(AUTHORIZATION,"Basic "+base64)},this.createSession=function(base64){this.addSessionProperty(AUTHORIZATION,"Basic "+base64)},this.logout=function(){this.isSessionSupported?ls.clearAll():ls.cookie.clearAll()}}]).service("fluidOptionService",[function(){this.templateUrl=void 0,this.open=!1,this.openOption=function(templateUrl){this.templateUrl=templateUrl,this.open=!0},this.closeOption=function(){this.open=!1,this.templateUrl=void 0}}]),fluidComponents.factory("fluidInjector",["$q","$rootScope","sessionService","fluidLoaderService","responseEvent",function(q,rs,ss,fls,r){return{request:function(config){return fls.enabled&&(fls.loaded=!1),config.headers["Access-Control-Allow-Origin"]="*",void 0!==config.headers["fluid-container-id"],ss.isSessionOpened()&&(config.headers.Authorization=ss.getSessionProperty(AUTHORIZATION)),config},requestError:function(rejection){return fls.loaded=!0,fls.enabled=!0,q.reject(rejection)},response:function(response){return fls.loaded=!0,fls.enabled=!0,r.callEvent(response),response},responseError:function(rejection){return fls.loaded=!0,fls.enabled=!0,q.reject(rejection)}}}]).factory("responseEvent",["$location","$rootScope",function(l,rs){var responseEvent={};return responseEvent.responses=[],responseEvent.addResponse=function(evt,statusCode,redirect,path){responseEvent.responses.push({evt:evt,statusCode:statusCode,redirect:redirect,path:path})},responseEvent.callEvent=function(res){angular.forEach(responseEvent.responses,function(response){response.statusCode===res.statusCode&&(response.evt?rs.$broadcast(response.evt,response.data,response.statusText):response.redirect&&l.path(response.path))})},responseEvent}]),fluidComponents.directive("bootstrapViewport",["$rootScope","$window",function(rs,w){return{restrict:"AE",replace:!0,template:"<span class='hidden'><span class='fluid-view-lg'></span><span class='fluid-view-md'></span><span class='fluid-view-sm'></span><span class='fluid-view-xs'></span></span>",link:function(scope,element,attr){"block"===element.find("span.fluid-view-lg").css("display")?rs.viewport="lg":"block"===element.find("span.fluid-view-md").css("display")?rs.viewport="md":"block"===element.find("span.fluid-view-sm").css("display")?rs.viewport="sm":"block"===element.find("span.fluid-view-xs").css("display")&&(rs.viewport="xs"),$(w).on("resize",function(){"block"===element.find("span.fluid-view-lg").css("display")?rs.viewport="lg":"block"===element.find("span.fluid-view-md").css("display")?rs.viewport="md":"block"===element.find("span.fluid-view-sm").css("display")?rs.viewport="sm":"block"===element.find("span.fluid-view-xs").css("display")&&(rs.viewport="xs")})}}}]),fluidComponents.directive("fluidVisible",["$rootScope","$window",function(rs,w){return{restrict:"AC",scope:{task:"="},link:function(scope,element,attr){var currentElement=element[0];console.info("fluidVisible-source",currentElement),scope.source=currentElement,attr.view&&(scope.view=attr.view),attr.size&&(scope.size=attr.size),scope.checkView=function(){if(scope.view)if(scope.view.indexOf(",")>-1){var views=scope.view.split(",");console.info("fluidVisible-views",views);var returnValue={valid:!1};angular.forEach(views,function(data){rs.viewport===data&&(this.valid=!0)},returnValue),returnValue.valid?$(scope.source).show():$(scope.source).hide()}else{var valid=!1;rs.viewport===scope.view&&(valid=!0),valid?$(scope.source).show():$(scope.source).hide()}},scope.checkSize=function(){if("lg"===rs.viewport&&scope.task&&scope.size)if(scope.size.indexOf(",")>-1){var sizes=scope.size.split(",");console.info("fluidVisible-sizes",sizes),console.info("sizes",sizes);var returnValue={valid:!1};angular.forEach(sizes,function(data){scope.task.size+""===data&&(this.valid=!0)},returnValue),console.info("size-value",returnValue),returnValue.valid?$(scope.source).show():$(scope.source).hide()}else{var valid=!1;scope.task.size+""===scope.size&&(valid=!0),valid?$(scope.source).show():$(scope.source).hide()}},scope.checkView(),scope.checkSize(),$(w).on("resize",function(){scope.checkView(),scope.checkSize()}),scope.task&&scope.$watch(function(scope){return scope.task.size},function(value){scope.checkSize()})}}}]),fluidComponents.directive("hidden50",["fluidFrameService",function(f){return{restrict:"AC",scope:!1,link:function(scope,element,attr){!f.fullScreen||attr.showOnFullscreen&&"false"!==attr.showOnFullscreen?f.fullScreen&&"true"===attr.showOnFullscreen?element.show():scope.task&&scope.$watch(function(scope){return scope.task.size},function(value){switch(value){case 25:element.attr("hidden25")||element.show();break;case 50:console.info("hidden50-hidden",element),element.hide();break;case 75:element.attr("hidden75")||element.show();break;case 100:element.attr("hidden100")||element.show()}}):element.hide()}}}]).directive("hidden100",["fluidFrameService",function(f){return{restrict:"AC",scope:!1,link:function(scope,element,attr){!f.fullScreen||attr.showOnFullscreen&&"false"!==attr.showOnFullscreen?f.fullScreen&&"true"===attr.showOnFullscreen?element.show():scope.task&&scope.$watch(function(scope){return scope.task.size},function(value){switch(value){case 25:element.attr("hidden25")||element.show();break;case 50:element.attr("hidden50")||element.show();break;case 75:element.attr("hidden75")||element.show();break;case 100:element.hide()}}):element.hide()}}}]);var eventInterceptorId="event_interceptor_id_",goToEventID="event_got_id_",EVENT_NOT_ALLOWED="not_allowed_",AUTHORIZATION="authorization";angular.module("templates-dist",["templates/fluid/fluidBar.html","templates/fluid/fluidCheckbox.html","templates/fluid/fluidDatePicker.html","templates/fluid/fluidField.html","templates/fluid/fluidFrame.html","templates/fluid/fluidImage.html","templates/fluid/fluidLookup.html","templates/fluid/fluidModal.html","templates/fluid/fluidNotify.html","templates/fluid/fluidOption.html","templates/fluid/fluidPanel.html","templates/fluid/fluidRadio.html","templates/fluid/fluidReportTable.html","templates/fluid/fluidSelect.html","templates/fluid/fluidTaskIcon.html","templates/fluid/fluidTemplate.html","templates/fluid/fluidTextArea.html","templates/fluid/fluidToolbar.html","templates/fluid/fluidUploader.html"]),angular.module("templates/fluid/fluidBar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidBar.html","<ul class=\"nav navbar navbar-top-links\">\n    <li ng-class=\"task.active ? 'flow-bar-icon-active':''\" ng-repeat='task in taskList | limitTo:10'>\n        <a class='flow-bar-icon' href='#' ng-click='open(task)'><i ng-class='task.glyph'></i><span\n                class=\"hidden-lg hidden-md hidden-sm\">&nbsp;{{task.title}}</span> </a>\n    </li>\n    <li class=\"hidden-xs\" class='dropdown' ng-hide='taskList.length < 11'>\n        <a href='#' class='dropdown-toggle' data-toggle='dropdown'><span class='fa fa-angle-down'></span></a>\n        <ul class='dropdown-menu' style='overflow: auto'>\n            <li ng-show='$index >= 10' class='border'\n                ng-repeat='tsk in taskList' ng-class=\"tsk.active ?'flow-bar-icon-active':''\">\n                <a href='#' class='flow-bar-task' title='{{tsk.title}}' ng-click=\"open(tsk)\">\n                    <i ng-class='tsk.glyph'></i> <span>&nbsp;{{tsk.title}}</span>\n                </a></li>\n        </ul>\n    </li>\n</ul>")}]),angular.module("templates/fluid/fluidCheckbox.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidCheckbox.html",'<div class="form-group flow-form">\n    <label ng-click="update()" column="12" class="control-label"\n           for="{{name}}">\n\n        <input style="position: absolute; left: -9999px; width: 1px; height: 1px;" name="{{name}}"\n               ng-model="model"\n               ng-disabled="disabled ? disabled : false"\n               ng-required="required ? required : false"/>\n\n        <span ng-if="disabled ? disabled : false" class="fluid-checkbox disabled">\n            <i ng-if="model" class="fa fa-check-square-o" style="font-size: 20px;color: #d3d3d3"></i>\n            <i ng-if="!model" class="fa fa-square-o" style="font-size: 20px;color: #d3d3d3"></i>\n        </span>\n\n        <span ng-if="disabled ? false : true" class="fluid-checkbox"\n              type="button">\n            <i ng-if="model" class="text-success fa fa-check-square-o" style="font-size: 20px"></i>\n            <i ng-if="!model" class="fa fa-square-o" style="font-size: 20px;color: grey"></i>\n        </span>\n\n        {{label}}\n        <span class="text-danger" ng-show=\'required\'> *</span>\n    </label>\n</div>\n')}]),angular.module("templates/fluid/fluidDatePicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidDatePicker.html","<div class='form-group flow-form'><label column=\"12\" class='control-label'>{{label}}<span style='color: #ea520a'\n                                                                                          ng-show='required'>*</span></label>\n\n    <div column=\"12\"><input placeholder='{{format}}' name='{{name}}' ng-change='convertToTimestamp()'\n                            ng-disabled='disabled' class='form-control datepicker' ng-model='temp' type='text'\n                            ng-required='required'/></div>\n</div>")}]),angular.module("templates/fluid/fluidField.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidField.html","<div class='form-group flow-form'><label for=\"{{name}}\" column=\"12\" class='control-label'>{{label}}<span\n        class=\"text-danger\"\n        ng-show='required'>*</span>\n    <input ng-blur=\"blur()\" name='{{name}}' ng-disabled='disabled'\n           class='form-control'\n           ng-model='model'\n           type='{{type}}' ng-required='required'/></label>\n</div>")}]),angular.module("templates/fluid/fluidFrame.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidFrame.html",'<div class="container-fluid frame-content"\n     ng-class="fluidFrameService.fullScreen ? \'frame-fullscreen\' : \'frame-fluidscreen\'">\n\n    <bootstrap-viewport></bootstrap-viewport>\n    <div ng-if="fluidFrameService.fullScreen" class="frame-content-div" column="12"\n         ng-show="fluidFrameService.fullScreen" style="padding: 0;">\n        <fluid-panel task=\'fluidFrameService.fullScreenTask\'></fluid-panel>\n    </div>\n    <div ng-if="!fluidFrameService.fullScreen" class="container-fluid frame-content-div"\n         ng-hide="fluidFrameService.fullScreen">\n        <div ng-init="initTask(task)" class="fluid-panel-transition"\n             ng-repeat=\'task in fluidFrameService.taskList | filter:{active:true, title:fluidFrameService.searchTask}\'>\n            <fluid-panel task=\'task\'></fluid-panel>\n        </div>\n    </div>\n    <div class="fluid-footer panel panel-primary" ng-show="fluidFrameService.actionBarShowing"\n         ng-class="fluidFrameService.actionBarClass">\n        <div class="panel-heading">\n            <div class="tools"></div>\n        </div>\n        <div class="panel-body">\n            body\n        </div>\n        <!--<div class="pull-right">Powered by <a href="#www.jsofttechnologies.com">JSoft Technologies</a> of GEM</div>-->\n    </div>\n\n</div>\n')}]),angular.module("templates/fluid/fluidImage.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidImage.html","<div class='form-group flow-form'><label column=\"12\" class='control-label col-sm-2'>{{label}}<i ng-if='notDone'\n                                                                                                class='fa fa-spinner fa-spin'></i><span\n        class=\"text-danger\" ng-show='required'>*</span>\n\n    <div class='flow-group-icon' accept='image/*' ng-model='preview' ng-file-drop\n         drag-over-class=\"{accept:'flow-group-icon-accept', reject:'flow-group-icon-error', delay:100}\">\n        <img class='thumbnail' style='border-radius: 5px' width='198px' height='173px'\n             ng-src='{{preview[0].dataUrl}}'/></div>\n    <div class='marginBottom5px' ng-show='!disabled'><span accept='image/*' class='btn btn-info' ng-show='!disabled'\n                                                           ng-file-change='onFileSelect(preview[0],$files)'\n                                                           ng-file-select ng-model='preview'>\n            <span class='fa fa-image'\n                  ng-show='!disabled'></span>&nbsp;&nbsp;{{preview[0].dataUrl != null ? 'Change' : 'Attach'}}</span></span>\n    </div>\n</label>\n</div>")}]),angular.module("templates/fluid/fluidLookup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidLookup.html",'<div class="form-group flow-form">\n    <div ng-transclude></div>\n    <label column="12" class=\'control-label\' for="{{name}}">{{label}}\n        <span class="text-danger" ng-show=\'required\'>*</span>\n\n        <div class=\'input-group\' name="{{name}}">\n'+"            <input ng-disabled='disabled' id='ctnr_{{id}}' href='#' title='{{label}}' readonly class='form-control'\n                   ng-required='required' ng-click='look()' style='color:#000000;background: #ffffff'/><span\n                ng-if='isNotModeled()' class='input-group-btn'>\n            <button type='button' ng-disabled='disabled' class='btn btn-info' ng-click='look()'>\n                <span class='fa fa-search'></span></button></span>\n            <span ng-if='isModeled()' class='input-group-btn'>\n            <button type='button' title='clear' class='btn btn-info' ng-disabled='disabled' ng-click='clear()'>\n                <span class='fa fa-eraser'></span></button></span></div>\n        </span>\n    </label>\n\n</div>\n          ")}]),angular.module("templates/fluid/fluidModal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidModal.html","<div class='overlay hidden animated fadeIn anim-dur'><div ng-style='style'class='flow-modal animated pulse anim-dur'><div ng-transclude></div></div></div>\n")}]),angular.module("templates/fluid/fluidNotify.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidNotify.html",'<li class="dropdown">\n    <a data-hover="dropdown" href="#" class="dropdown-toggle">\n        <i class="fa fa-bell fa-fw"></i>\n        <span class="badge badge-blue" ng-show="fs.alerts.length > 0">{{fs.alerts.length}}</span></a>\n    <ul class="dropdown-menu dropdown-alerts">\n        <li><p>You have {{fs.alerts.length > 0 ? fs.alerts.length +\' new\' : \'no new\' }} notifications</p></li>\n        <li>\n            <div class="dropdown-slimscroll">\n                <ul>\n                    <li ng-repeat="alert in fs.top">\n                        <a href="#" ng-click="open(alert)" ng-class="!alert.notified ?\'active\':\'\'">\n                            <div ng-class="getLabelScheme(alert)" class="fluid-notify-icon"><i\n                                    ng-class="getMessageTypeGlyph(alert)"></i></div>\n                            &nbsp;{{alert.message | characters: 25 : false}}<span class="pull-right text-muted small">{{fs.interval(alert)}}</span></a>\n                    </li>\n                </ul>\n            </div>\n        </li>\n        <li class="last" ><a href="#" class="text-right" ng-click="openNotificationCenter()">See all alerts</a></li>\n    </ul>\n</li>')}]),angular.module("templates/fluid/fluidOption.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidOption.html",'<div id="fluid_option_{{task.id}}" class="fluid-option" ng-style="!fluidOptionService.open?{height:0}:{}"\n     click-outside="fluidOptionService.closeOption()">\n\n    <ng-transclude ng-if="!useTemplate && !fluidOptionService.templateUrl && fluidOptionService.open"></ng-transclude>\n\n    <div ng-if="!useTemplate && fluidOptionService.templateUrl && fluidOptionService.open"\n         ng-include="fluidOptionService.templateUrl"></div>\n\n    <div ng-if="useTemplate" ng-include src="templateName"></div>\n\n    <span class="pull-right"><a href="#" title="close" ng-click="fluidOptionService.closeOption()"><i\n            class="fa fa-close"></i> close</a></span>\n\n</div>')}]),angular.module("templates/fluid/fluidPanel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidPanel.html","<div id='_id_fp_{{task.id}}' task\n     class=\"panel {{!fluidFrameService.fullScreen ? 'panel-default' : 'panel-default frame-fullscreen'}}\">\n\n    <div class='panel-heading' ng-show=\"!task.locked\">\n\n        <!-- Title-->\n        <div class=\"panel-title\"><a ng-if=\"!fluidFrameService.fullScreen \" data-toggle='collapse'\n                                    data-target='#_{{task.id}}'\n                                    href='#'\n                                    class=\"fluid-panel-heading-title\">\n            <fluid-task-icon class=\"fluid-icon-left hidden-sm hidden-md hidden-xs\" task=\"task\"></fluid-task-icon><span\n                ng-if=\"task.loaded\">&nbsp;{{task.title}} - {{task.page.title}}</span></a>\n            <span ng-if=\"task.loaded && fluidFrameService.fullScreen\">&nbsp;{{task.title}} - {{task.page.title}}</span>\n\n            <img ng-if=\"!task.loaded && !fluidFrameService.fullScreen\"\n                 src=\"../assets/loader/loader1.GIF\"/>\n            <img ng-if=\"!task.loaded && fluidFrameService.fullScreen\"\n                 src=\"../assets/loader/loader2.GIF\"/>\n        </div>\n\n        <!-- Control -->\n        <div class=\"{{task.useImg ? 'panel-control-img': 'panel-control-glyph'}} pull-right\">\n            <div class=\"btn-group btn-group-lg hidden-lg {{!task.useImg ?'fluid-icon-right-glyph':''}}\">\n                <a href='#' class='dropdown-toggle' data-toggle='dropdown'>\n                    <fluid-task-icon task=\"task\"\n                                     class=\"{{!fluidFrameService.fullScreen ? '' : 'text-primary'}} fluid-panel-icon-control\"></fluid-task-icon>\n                </a>\n                <ul class='dropdown-menu dropdown-menu-right dropdown-menu-inverse'>\n                    <li><a href='#' ng-click='task.refresh()'>Refresh</a></li>\n                    <li class='divider hidden-lg hidden-sm hidden-xs'></li>\n                    <li ng-if=\"!fluidFrameService.fullScreen\">\n                        <a ng-click='task.fullScreen()'>Fullscreen</span></a>\n                    </li>\n                    <li ng-if='fluidFrameService.fullScreen'>\n                        <a ng-click=\"task.fluidScreen()\">Fluidscreen</a>\n                    </li>\n                    <li class='hidden-lg'><a href='#' ng-click='task.hide(task)'>Minimize</a>\n                    </li>\n                    <li ng-if=\"task.closeable==undefined || task.closeable==true\" ng-class=\"task.locked ?\n                        'hidden-sm hidden-md hidden-xs' : ''\" class='divider'></li>\n                    <li ng-if=\"!task.closeable==undefined || task.closeable==true\"><a\n                            ng-class=\"task.locked ? 'hidden-sm hidden-md hidden-xs' : ''\" href='#'\n                            ng-click='task.close()'>Close</a></li>\n                </ul>\n            </div>\n            <div class=\"hidden-md hidden-xs hidden-sm btn-group btn-group-xs {{fluidFrameService.fullScreen && !task.useImg ? 'panel-control-fullscreen' :''}}\n             {{!fluidFrameService.fullScreen && !task.useImg ? 'panel-tools' :''}} {{!fluidFrameService.fullScreen && task.useImg ? 'panel-tools-img' :''}}\">\n                <!-- ToDo: Allow panel to freeze. <button class='btn btn-info fa fa-paperclip' ng-click='freeze(task)'ng-class=\\\"task.freeze ? 'active' :''\\\" title='Clip'></button>-->\n                <!-- <button ng-class=\"task.pinned ?\n                         'active' :''\" title='Pin' type=\"button\" class=\"btn btn-info\" ng-click='task.pin()' >\n                     <i class='fa fa-thumb-tack'title=\"Pin\"\n                      ></i>\n                 </button>-->\n\n                <!--  <button ng-hide='fluidFrameService.fullScreen' ng-disabled='task.pinned' type=\"button\"\n                          class=\"btn btn-info\" ng-click='task.max25()' title=\"Maximize - 25\">\n                      <i><span class='fa fa-arrows-h' style=\"transform: scaleX(0.8)\"></span></i>\n                  </button>-->\n\n                <button ng-hide='fluidFrameService.fullScreen' ng-disabled='task.pinned' title=\"Maximize - 50\"\n                        class=\"btn btn-info\"\n                        ng-click='task.max50()'>\n                    <i class='element-center fa fa-arrows-h' style=\"transform: scaleX(0.9)\"></i>\n                </button>\n                <!--<button ng-hide='fluidFrameService.fullScreen' ng-disabled='task.pinned' ng-click='task.max75()'\n                        class=\"btn btn-info\">\n                    <i title=\"Maximize - 75\"\n                            ><span class='fa fa-arrows-h' style=\"transform: scaleX(1.1)\"></span></i>\n                </button>-->\n                <button ng-hide='fluidFrameService.fullScreen' ng-disabled='task.pinned' ng-click='task.max100()'\n                        class=\"btn btn-info\">\n                    <i title=\"Maximize - 100\" class='element-center fa fa-arrows-h' style=\"transform: scaleX(1.3)\"></i>\n                </button>\n                <button ng-disabled='task.pinned' title=\"Minimize\" ng-click='task.hide(task)'\n                        class=\"btn {{fluidFrameService.fullScreen ? 'btn-default' : 'btn-info'}}\">\n                    <i title='minimize'\n                       class='element-center fa fa-angle-down'></i>\n                </button>\n                <button ng-if=\"!fluidFrameService.fullScreen\" class=\"btn btn-info\" ng-click='task.fullScreen()'>\n                    <i title=\"Full screen\" class=\"element-center glyphicon glyphicon-fullscreen\"></i>\n                </button>\n                <button ng-if='fluidFrameService.fullScreen'\n                        class=\"btn {{fluidFrameService.fullScreen ? 'btn-default' : 'btn-info'}}\"\n                        ng-click=\"task.fluidScreen()\">\n                    <i title=\"Fluid screen\" class='element-center fa fa-th'></i>\n                </button>\n                <button class=\"btn {{fluidFrameService.fullScreen ? 'btn-default' : 'btn-info'}}\"\n                        ng-click='task.refresh()'>\n                    <i title=\"Refresh\" class=\"element-center fa \"\n                       ng-class=\"task.loaded ? 'fa-refresh' : 'fa-spin fa-refresh'\"></i>\n                </button>\n                <button ng-if=\"task.closeable==undefined || task.closeable==true\"\n                        class=\"btn {{fluidFrameService.fullScreen ? 'btn-default' : 'btn-danger'}}\"\n                        ng-disabled='task.pinned||task.locked' ng-click='task.close()'>\n                    <i class='element-center fa fa-close' title=\"Close\"\n                       title='close'></i>\n                </button>\n\n            </div>\n\n        </div>\n    </div>\n    <div id='_{{task.id}}' class='panel-collapse collapse in'>\n        <div id='_id_fpb_{{task.id}}'\n             class=\"panel-body minHeight fluid-panel container-fluid\"\n             ng-disabled='!task.loaded'>\n            <fluid-option use-template=\"true\" template-name=\"{{fluid.fluidOptionTemplate}}\">\n\n            </fluid-option>\n            <fluid-message id=\"{{fluid.getElementFlowId('pnl_msg')}}\"></fluid-message>\n            <fluid-tool size=\"large\" fluid=\"fluid\"\n                        id=\"{{fluid.getElementFlowId('flw_tl')}}\"\n                        ng-if='task.showToolBar' controls='toolbars'\n                        task='task' pages='task.navPages'></fluid-tool>\n\n            <div class=\"hidden50\" show-on-fullscreen=\"true\"\n                 ng-class=\"task.showPageList?'fluid-panel-page-list col-lg-3 col-md-3': 'fluid-panel-page-list-hidden'\">\n\n"+'                <div ng-if="task.showPageList" class="input-group ">\n                    <input class="form-control" ng-model="task.searchPage" placeholder="Page"/>\n                    <span class="input-group-addon"><i class="fa fa-search"></i></span>\n                </div>\n\n                <ul ng-if="task.showPageList" class="list-group">\n                    <li class="list-group-item" ng-repeat="page in task.pages | filter: task.searchPage"\n                        ng-click="fluid.goTo(page.name)"\n                        style="cursor: pointer"\n                        ng-class="task.page.name == page.name ? \'active\':\'\'">\n                        {{page.title}}\n                    </li>\n                </ul>\n            </div>\n            <!-- ng-class="task.showPageList ? \'col-lg-9 col-md-9\':\'col-lg-12 col-md-12\'"-->\n            <div class="fluid-panel-content" column="{{task.showPageList ? 9 : 12}}">\n                <div ng-if=\'task.pageLoaded && !task.page.static\' id=\'page_div_{{task.id}}\'\n                     class="fluid-panel-page animated {{task.pageTransition ? task.pageTransition : \'fadeIn\'}}"\n                     ng-include=\'task.page.home\'></div>\n                <div ng-if=\'task.pageLoaded && task.page.static\' id=\'page_div_{{task.id}}\'\n                     class="fluid-panel-page animated {{task.pageTransition ? task.pageTransition : \'fadeIn\'}}"\n                     ng-bind-html=\'task.page.html\'></div>\n            </div>\n\n        </div>\n\n    </div>\n\n    <fluid-template template-name="pageList">\n        <div class="input-group">\n            <input class="form-control" ng-model="task.searchPage" placeholder="Page"/>\n            <span class="input-group-addon"><i class="fa fa-search"></i></span>\n        </div>\n        <ul class="list-group">\n            <li class="list-group-item" ng-repeat="page in task.pages | filter: task.searchPage"\n                ng-click="fluid.goTo(page.name);fluidOptionService.closeOption()"\n                style="cursor: pointer"\n                ng-class="task.page.name == page.name ? \'active\':\'\'">\n                {{page.title}}\n            </li>\n        </ul>\n    </fluid-template>\n\n\n</div>\n')}]),angular.module("templates/fluid/fluidRadio.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidRadio.html",'<div class=\'form-group flow-form\'>\n    <label column="12" class=\'control-label\' for="{{name}}">{{label}}\n        <span class="text-danger"\n              ng-show=\'required\'>*</span>\n\n        <div name="{{name}}" class="fluid-radio"></div>\n    </label>\n\n</div>')}]),angular.module("templates/fluid/fluidReportTable.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidReportTable.html",'<table class="table table-hover table-condensed" ng-init="rep = []">\n    <thead>\n    <tr>\n        <th class="bg-primary header-center">\n            <input type="checkbox"\n                   ng-model="task.table.isMaterialsAdvisor"\n                   fluid-tooltip\n                   tooltip-title="{{task.table.isMaterialsAdvisor == true ? \'Hide materials advisor\' : \'Show materials advisor\'}}"\n                   tooltip-time="300" tooltip-at="top right" tooltip-my="bottom left"/></th>\n        <th class="bg-info">\n            <input type="checkbox"\n                   ng-model="task.table.isWeek"\n                   fluid-tooltip\n                   tooltip-title="{{task.table.isWeek == true ? \'Hide week\' : \'Show week\'}}"\n                   tooltip-time="300" tooltip-at="top right" tooltip-my="bottom left"/>\n        </th>\n        <th ng-if="!task.isYear" class="bg-info">\n            <input type="checkbox"\n                   ng-model="task.table.isYear"\n                   fluid-tooltip\n                   tooltip-title="{{task.table.isWeek == true ? \'Hide year\' : \'Show year\'}}"\n                   tooltip-time="300" tooltip-at="top right"\n                   tooltip-my="bottom left"/></th>\n        <th class="bg-info header"></th>\n        <th class="bg-info header"></th>\n        <th class="bg-success"></th>\n        <th class="bg-info"></th>\n        <th class="bg-info"></th>\n        <th class="bg-success"></th>\n        <th class="bg-info"></th>\n        <th class="bg-info"></th>\n        <th class="bg-success"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n        <th class="bg-warning"></th>\n    </tr>\n    </thead>\n    <thead>\n    <tr>\n        <th class="bg-primary">{{!task.isAgent && task.table.isMaterialsAdvisor ? \'Materials Advisor\'\n            :\'Action\'}}\n        </th>\n        <th class="bg-info" ng-if="task.table.isWeek">Week</th>\n        <th ng-if="!task.isYear && task.table.isYear" class="bg-info">Year</th>\n        <th class="bg-info header">Planned Target</th>\n        <th class="bg-info header">Planned Actual</th>\n        <th class="bg-success">Planned Call Productivity</th>\n        <th class="bg-info">Unplanned Target</th>\n        <th class="bg-info">Unplanned Actual</th>\n        <th class="bg-success">Unplanned Call Productivity</th>\n        <th class="bg-info">Total Target</th>\n        <th class="bg-info">Total Actual</th>\n        <th class="bg-success">Total Call Productivity</th>\n        <th class="bg-warning">Exam Copies Distribution</th>\n        <th class="bg-warning">Invitation to Events</th>\n        <th class="bg-warning">Confirmation of Events</th>\n        <th class="bg-warning">Giveaways Distribution</th>\n        <th class="bg-warning">Delivery of Incentive/Donation</th>\n        <th class="bg-warning">Purchase Order</th>\n        <th class="bg-warning">Delivery of Add\'l Order / TRM / Compli</th>\n        <th class="bg-warning">Booklist</th>\n        <th class="bg-warning">Updated Customer Info Sheet</th>\n        <th class="bg-warning">Implemented Ex-Sem</th>\n    </tr>\n    </thead>\n\n    <tbody ng-repeat="(month , report) in task.result | groupBy: \'reportMonth\'"\n           ng-init="rep.push({selectedWeek:0})">\n    <tr>\n        <td class="bg-info" colspan="2">{{month}}</td>\n        <td colspan="3"><select ng-model="rep[$index].selectedWeek">\n            <option value="1" label="Week 1"></option>\n            <option value="2" label="Week 2"></option>\n            <option value="3" label="Week 3"></option>\n            <option value="4" label="Week 4"></option>\n            <option value="5" label="Week 5"></option>\n            <option value="0" label="All week"></option>\n        </select></td>\n    </tr>\n    <tr ng-show="rep[$index].selectedWeek == 0"\n        ng-repeat="day in report">\n        <td><a href="#" ng-click="task.getCustomers(day)"><span><i\n                ng-class="(day.view ? \'fa fa-search-minus\' : \'fa fa-search-plus\')"></i>\n                                         {{ !task.isAgent && table.isMaterialsAdvisor ? day.materialsAdvisor : \'\'}}</span></a>\n        </td>\n        <td ng-if="table.isWeek">{{day.week}}</td>\n        <td ng-if="!task.isYear">{{day.year}}</td>\n        <td>{{day.plannedTarget}}</td>\n        <td>{{day.plannedActual}}</td>\n        <td>{{day.plannedCallProductivity | setDecimal: 2}}%</td>\n        <td>{{day.unplannedTarget}}</td>\n        <td>{{day.unplannedActual}}</td>\n        <td>{{day.unplannedCallProductivity | setDecimal: 2}}%</td>\n        <td>{{day.totalActivity}}</td>\n        <td>{{day.unplannedActual + day.unplannedActual}}</td>\n        <td>{{day.totalCallProductivity | setDecimal: 2}}%</td>\n        <td>{{day.ecd}}</td>\n        <td>{{day.ite}}</td>\n        <td>{{day.coe}}</td>\n        <td>{{day.gd}}</td>\n        <td>{{day.doi}}</td>\n        <td>{{day.po}}</td>\n        <td>{{day.daotrc}}</td>\n        <td>{{day.bookList}}</td>\n        <td>{{day.ucis}}</td>\n        <td>{{day.ies}}</td>\n    </tr>\n    </tbody>\n</table>');

}]),angular.module("templates/fluid/fluidSelect.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidSelect.html","<div class='form-group flow-form'><label column=\"12\" class='control-label' for=\"{{name}}\">{{label}}<span\n        class=\"text-danger\"\n        ng-show='required'>*</span><select\n        id='{{id}}_select' data-toggle='select' class='form-control' ng-required='required'\n        ng-disabled='disabled' name=\"{{name}}\">\n    <option class='hidden-lg hidden-md' value='' disabled selected>Select {{label}}</option>\n</select></label>\n</div>")}]),angular.module("templates/fluid/fluidTaskIcon.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidTaskIcon.html",'<span><span ng-if="task.useImg"><img class="fluid-task-icon" width="{{width? width:15}}" height="{{height?height:15}}"\n                                     ng-src="{{task.imgSrc}}"></span><i\n        ng-if="!task.useImg"\n        ng-class="task.glyph"></i></span>')}]),angular.module("templates/fluid/fluidTemplate.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidTemplate.html",'<script type="text/ng-template" id="{{templateId}}">\n    <ng-transclude></ng-transclude>\n</script>')}]),angular.module("templates/fluid/fluidTextArea.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidTextArea.html","<div class='form-group flow-form'><label column=\"12\" class='control-label'>{{label}}<span class=\"text-danger\"\n                                                                                          ng-show='required'>*</span>\n    <textarea\n            rows='{{rows}}' cols='{{cols}}' name='{{name}}' ng-disabled='disabled'\n            class='form-control' ng-model='model' type='{{type}}' ng-required='required'/></label>\n\n</div>")}]),angular.module("templates/fluid/fluidToolbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidToolbar.html","<div class='container-fluid animated fadeIn anim-dur' style='overflow: auto'>\n    <div class=\"ndg-breadcrumb\">\n        <ul class='breadcrumb hidden-xs hidden-sm hidden50' show-on-fullscreen=\"true\">\n\n            <li class=\"pull-left\"\n                ng-repeat='page in task.navPages'>\n                <a ng-class=\"task.page.name == page.name ? 'plain-text':''\" title='{{page.title}}' href='#'\n                   ng-click='goToEvent(page.name,page.param)'>{{page.title}}</a>\n            </li>\n            <div class='form-group pull-right'>\n                <div class='btn-group {{group-size}}'>\n                    <button id='btn_tool_{{control.id}}_{{task.id}}' ng-repeat='control in controls'\n                            title='{{control.label}}'\n                            class='btn button-tool' ng-class='getClass(control.uiType)'\n                            ng-click='runEvent(control,$event)'\n                            ng-disabled='control.disabled' type='button'><span ng-class='control.glyph'></span></button>\n                </div>\n            </div>\n            <div class=\"clearfix\"></div>\n        </ul>\n        <div class='breadcrumb hidden100'>\n            <!--TODO: create modal for fluidTask-->\n            <div class=\"pull-left\">\n                <a ng-class=\"task.page.name == task.navPages[0].name ? 'plain-text':''\"\n                   title='{{task.navPages[0].title}}' href='#'\n                   ng-click='goToEvent(task.navPages[0].name,task.navPages[0].param)'>{{task.navPages[0].title}}</a>\n                <a ng-if=\"task.navPages.length > 1\" href=\"#\"><i class=\"fa fa-caret-down\"></i></a>\n            </div>\n            <!-- TODO: create fluidOption template tag -->\n            <div class='form-group pull-right'>\n                <div class='btn-group {{group-size}}'>\n                    <button id='btn_tool_{{control.id}}_{{task.id}}' ng-repeat='control in controls'\n                            title='{{control.label}}'\n                            class='btn button-tool' ng-class='getClass(control.uiType)'\n                            ng-click='runEvent(control,$event)'\n                            ng-disabled='control.disabled' type='button'><span ng-class='control.glyph'></span></button>\n                </div>\n            </div>\n            <div class=\"clearfix\"></div>\n        </div>\n    </div>\n\n</div>")}]),angular.module("templates/fluid/fluidUploader.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/fluid/fluidUploader.html","<div></div>")}]);