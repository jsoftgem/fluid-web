<div id='_id_fp_{{task.id}}' task
     class="panel {{!fluidFrameService.fullScreen ? 'panel-primary' : 'panel-default'}}">
    <div class='panel-heading' ng-show="!task.locked">
        <div class="panel-title"><a ng-if="!fluidFrameService.fullScreen " data-toggle='collapse'
                                    data-target='#_{{task.id}}'
                                    href='#'
                                    class="fluid-panel-heading-title"><span ng-class="task.glyph"
                                                                            class='hidden-sm hidden-md hidden-xs'></span><span
                ng-if="task.loaded">&nbsp;{{task.title}} - {{task.page.title}}</span></a>
            <span ng-if="task.loaded && fluidFrameService.fullScreen">&nbsp;{{task.title}} - {{task.page.title}}</span>

            <img ng-if="!task.loaded && !fluidFrameService.fullScreen"
                 src="../assets/loader/loader1.GIF"/>
            <img ng-if="!task.loaded && fluidFrameService.fullScreen"
                 src="../assets/loader/loader2.GIF"/>
        </div>
        <div class="panel-tools pull-right">
            <div class='btn-group btn-group-lg hidden-lg'><a href='#' class='dropdown-toggle'
                                                             data-toggle='dropdown'>
                <span ng-class="task.glyph"
                      class="{{!fluidFrameService.fullScreen ? 'fa-inverse' : 'text-primary'}} fluid-panel-icon-control"/></a>
                <ul class='dropdown-menu dropdown-menu-right dropdown-menu-inverse'>
                    <li><a href='#' ng-click='task.refresh()'>Refresh</a></li>
                    <li class='divider hidden-lg hidden-sm hidden-xs'></li>
                    <li ng-if="!fluidFrameService.fullScreen">
                        <a ng-click='task.fullScreen()'>Fullscreen</span></a>
                    </li>
                    <li ng-if='fluidFrameService.fullScreen'>
                        <a ng-click="task.fluidScreen()">Fluidscreen</a>
                    </li>
                    <li class='hidden-lg'><a href='#' ng-click='task.hide(task)'>Minimize</a>
                    </li>
                    <li ng-class="task.locked ?
                        'hidden-sm hidden-md hidden-xs' : ''" class='divider'></li>
                    <li><a ng-class="task.locked ? 'hidden-sm hidden-md hidden-xs' : ''" href='#'
                           ng-click='task.close()'>Close</a></li>
                </ul>
            </div>
            <div class='hidden-md hidden-xs hidden-sm btn-group btn-group-xs panel-control'>
                <!-- ToDo: Allow panel to freeze. <button class='btn btn-info fa fa-paperclip' ng-click='freeze(task)'ng-class=\"task.freeze ? 'active' :''\" title='Clip'></button>-->
                <!-- <button ng-class="task.pinned ?
                         'active' :''" title='Pin' type="button" class="btn btn-info" ng-click='task.pin()' >
                     <i class='fa fa-thumb-tack'title="Pin"
                      ></i>
                 </button>-->

                <!-- <button ng-hide='fluidFrameService.fullScreen' ng-disabled='task.pinned' type="button"
                        class="btn btn-info" ng-click='task.max25()'>
                     <i title="Maximize - 25"><span class='fa fa-arrows-h' style="transform: scaleX(0.7)"></span></i>
                 </button>-->

                <button ng-hide='fluidFrameService.fullScreen' ng-disabled='task.pinned' title="Maximize - 50"
                        class="btn btn-info"
                        ng-click='task.max50()'>
                    <i class='element-center fa fa-arrows-h' style="transform: scaleX(0.9)"></i>
                </button>
                <!-- <button ng-hide='fluidFrameService.fullScreen' ng-disabled='task.pinned' ng-click='task.max75()'
                         class="btn btn-info">
                     <i title="Maximize - 75"
                             ><span class='fa fa-arrows-h' style="transform: scaleX(1.1)"></span></i>-->
                </button>
                <button ng-hide='fluidFrameService.fullScreen' ng-disabled='task.pinned' ng-click='task.max100()'
                        class="btn btn-info">
                    <i title="Maximize - 100" class='element-center fa fa-arrows-h' style="transform: scaleX(1.3)"></i>
                </button>
                <button ng-disabled='task.pinned' title="Minimize" ng-click='task.hide(task)'
                        class="btn {{fluidFrameService.fullScreen ? 'btn-default' : 'btn-info'}}">
                    <i title='minimize'
                       class='element-center fa fa-angle-down'></i>
                </button>
                <button ng-if="!fluidFrameService.fullScreen" class="btn btn-info" ng-click='task.fullScreen()'>
                    <i title="Full screen" class="element-center glyphicon glyphicon-fullscreen"></i>
                </button>
                <button ng-if='fluidFrameService.fullScreen'
                        class="btn {{fluidFrameService.fullScreen ? 'btn-default' : 'btn-info'}}"
                        ng-click="task.fluidScreen()">
                    <i title="Fluid screen" class='element-center fa fa-th'></i>
                </button>
                <button class="btn {{fluidFrameService.fullScreen ? 'btn-default' : 'btn-info'}}"
                        ng-click='task.refresh()'>
                    <i title="Refresh" class="element-center fa "
                       ng-class="task.loaded ? 'fa-refresh' : 'fa-spin fa-refresh'"></i>
                </button>
                <button class="btn {{fluidFrameService.fullScreen ? 'btn-default' : 'btn-danger'}}"
                        ng-disabled='task.pinned||task.locked' ng-click='task.close()'>
                    <i class='element-center fa fa-close' title="Close"
                       title='close'></i>
                </button>

            </div>
        </div>
    </div>
    <div id='_{{task.id}}' class='panel-collapse collapse in'>
        <div id='_id_fpb_{{task.id}}' class='panel-body minHeight fluid-panel' ng-disabled='!task.loaded'>
            <fluid-message id="{{fluid.getElementFlowId('pnl_msg')}}"></fluid-message>
            <fluid-tool size="large" fluid="fluid" id="{{fluid.getElementFlowId('flw_tl')}}"
                        ng-if='task.showToolBar' controls='toolbars'
                        task='task' pages='task.navPages'></fluid-tool>
            <div ng-if='task.pageLoaded' id='page_div_{{task.id}}' class='fluid-panel-page'
                 ng-style="!fluidFrameService.fullScreen?{overfluid:auto}:{}"
                 ng-include='task.page.home'></div>
        </div>
    </div>
</div>
